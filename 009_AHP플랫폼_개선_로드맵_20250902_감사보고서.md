# AHP í”Œë«í¼ ìš°ì„ ìˆœìœ„ë³„ ê°œì„  ë¡œë“œë§µ

**ì‘ì„±ì¼**: 2025-09-02  
**ì‘ì„±ì**: Claude Code  
**ê¸°ì¤€ ë²„ì „**: v2.3.2

---

## ğŸ¯ ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤

| ìš°ì„ ìˆœìœ„ | ì˜í–¥ë„ | ê¸´ê¸‰ë„ | êµ¬í˜„ ë‚œì´ë„ | ì˜ˆìƒ ê¸°ê°„ | ë‹´ë‹¹ì |
|----------|--------|--------|-------------|-----------|---------|
| **ğŸ”´ P0** | ë§¤ìš° ë†’ìŒ | ì¦‰ì‹œ | ë‚®ìŒ | 1-7ì¼ | Backend Dev |
| **ğŸŸ  P1** | ë†’ìŒ | ë†’ìŒ | ì¤‘ê°„ | 1-4ì£¼ | Full-Stack |
| **ğŸŸ¡ P2** | ì¤‘ê°„ | ì¤‘ê°„ | ì¤‘ê°„ | 1-3ê°œì›” | Team |
| **ğŸŸ¢ P3** | ë‚®ìŒ | ë‚®ìŒ | ë†’ìŒ | 3-6ê°œì›” | Team |

---

## ğŸ”´ P0: ì¦‰ì‹œ ì¡°ì¹˜ (Critical) - 1ì£¼ì¼ ë‚´

### ğŸš¨ ë³´ì•ˆ ì·¨ì•½ì  (ìƒì‚°ì„± ì˜í–¥: 100%)

#### 1. JWT Secret í•˜ë“œì½”ë”© ì œê±°
**íŒŒì¼**: `backend/src/utils/auth.ts:11`  
**ì˜ˆìƒ ì‹œê°„**: 30ë¶„  
**ìœ„í—˜ë„**: Critical  

```typescript
// í˜„ì¬ (ìœ„í—˜)
const JWT_SECRET = process.env.JWT_SECRET || 'fallback-secret-key';

// ìˆ˜ì •ì•ˆ
const JWT_SECRET = process.env.JWT_SECRET;
if (!JWT_SECRET) {
  console.error('ğŸš¨ CRITICAL: JWT_SECRET environment variable is required');
  process.exit(1);
}
```

#### 2. ê´€ë¦¬ì API ë¬´ì¸ì¦ ì ‘ê·¼ ì°¨ë‹¨
**íŒŒì¼**: `backend/src/index.ts:87-434`  
**ì˜ˆìƒ ì‹œê°„**: 2ì‹œê°„  
**ìœ„í—˜ë„**: ë§¤ìš° ë†’ìŒ - ë¬´ì¸ì¦ ë°ì´í„° ì¡°ì‘ ê°€ëŠ¥

```typescript
// ìˆ˜ì •í•  ì—”ë“œí¬ì¸íŠ¸ (ì´ 8ê°œ)
âŒ app.post('/api/admin/migrate')                    // DB ë§ˆì´ê·¸ë ˆì´ì…˜
âŒ app.get('/api/admin/users')                       // ì „ì²´ ì‚¬ìš©ì ì •ë³´  
âŒ app.post('/api/admin/create-test-user')           // í…ŒìŠ¤íŠ¸ ê³„ì • ìƒì„±
âŒ app.post('/api/emergency/cleanup-phantom-projects') // ë°ì´í„° ì‚­ì œ
âŒ app.get('/api/quick-cleanup-phantoms')            // ë¹ ë¥¸ ì •ë¦¬
âŒ app.get('/api/debug/database-status')             // DB ìƒíƒœ ì¡°íšŒ
âŒ app.get('/api/debug/tables')                      // í…Œì´ë¸” ì •ë³´
âŒ app.get('/api/debug/recent-users')                // ìµœê·¼ ì‚¬ìš©ì

// ë³´ì•ˆ ê°•í™” ì ìš©
âœ… app.use('/api/admin/*', [authenticateToken, requireRole(['super_admin']), auditLogger]);
âœ… app.use('/api/emergency/*', [authenticateToken, requireRole(['super_admin']), confirmationRequired]);
âœ… app.use('/api/debug/*', [authenticateToken, requireRole(['super_admin']), ipWhitelist]);
```

#### 3. ì•½í•œ ë¹„ë°€ë²ˆí˜¸ í•´ì‹± êµì²´
**íŒŒì¼**: `backend/src/routes/evaluators.ts:836`  
**ì˜ˆìƒ ì‹œê°„**: 15ë¶„  
**ìœ„í—˜ë„**: High  

```typescript
// í˜„ì¬ (ì·¨ì•½)
async function hashPassword(password: string): Promise<string> {
  return crypto.createHash('sha256').update(password).digest('hex');
}

// ìˆ˜ì •ì•ˆ
import bcrypt from 'bcryptjs';
async function hashPassword(password: string): Promise<string> {
  const saltRounds = 12; // ë†’ì€ ë³´ì•ˆ ìˆ˜ì¤€
  return bcrypt.hash(password, saltRounds);
}
```

### ğŸ›¡ï¸ ì¦‰ì‹œ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# scripts/emergency-security-patch.sh

echo "ğŸš¨ Emergency Security Patch Deployment"

# 1. JWT Secret í™˜ê²½ë³€ìˆ˜ í™•ì¸
if [ -z "$JWT_SECRET" ]; then
  echo "âŒ JWT_SECRET not set. Please configure in Render dashboard."
  exit 1
fi

# 2. ë°±ì—”ë“œ ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸
cd backend
npm run build
npm test

# 3. ë³´ì•ˆ ê°ì‚¬
npm audit --audit-level=high

# 4. ë°°í¬ (Render.com ìë™ ë°°í¬)
git add .
git commit -m "ğŸ”’ Security patch: Fix JWT and admin API vulnerabilities"
git push origin main

echo "âœ… Security patch deployed. Monitor logs for 30 minutes."
```

---

## ğŸŸ  P1: ë†’ìŒ (High) - 1-4ì£¼ ë‚´

### ğŸ“Š ì˜í–¥ë„ vs êµ¬í˜„ ë‚œì´ë„ ë§¤íŠ¸ë¦­ìŠ¤

| ì‘ì—… | ì˜í–¥ë„ | êµ¬í˜„ ë‚œì´ë„ | ì˜ˆìƒ ì‹œê°„ | ìš°ì„ ìˆœìœ„ |
|------|--------|-------------|-----------|----------|
| App.tsx ë¦¬íŒ©í† ë§ | ë§¤ìš° ë†’ìŒ | ì¤‘ê°„ | 1ì£¼ | P1-1 |
| Rate Limiting | ë†’ìŒ | ë‚®ìŒ | 1ì¼ | P1-2 |
| ë²ˆë“¤ í¬ê¸° ìµœì í™” | ë†’ìŒ | ì¤‘ê°„ | 3ì¼ | P1-3 |
| DB ì¸ë±ìŠ¤ ìµœì í™” | ì¤‘ê°„ | ë‚®ìŒ | 2ì¼ | P1-4 |
| CORS ë³´ì•ˆ ê°•í™” | ì¤‘ê°„ | ë‚®ìŒ | 1ì¼ | P1-5 |

### P1-1: App.tsx ê±°ëŒ€ ì»´í¬ë„ŒíŠ¸ ë¶„í•  (1ì£¼)
**í˜„ì¬ ìƒíƒœ**: 1,774ì¤„ (ê¶Œì¥: 300ì¤„ ì´í•˜)  
**ì˜í–¥**: ê°œë°œ ìƒì‚°ì„± 30% í–¥ìƒ, ë²„ê·¸ ìœ„í—˜ 50% ê°ì†Œ

**ì‹¤í–‰ ê³„íš**:
```
Day 1-2: ë¼ìš°í„° ë¶„ë¦¬
â”œâ”€â”€ src/router/AppRouter.tsx (100ì¤„)
â”œâ”€â”€ src/router/routes.ts (50ì¤„)
â””â”€â”€ src/router/ProtectedRoute.tsx (30ì¤„)

Day 3-4: Context Provider ë¶„ë¦¬  
â”œâ”€â”€ src/providers/UserProvider.tsx (80ì¤„)
â”œâ”€â”€ src/providers/ProjectProvider.tsx (120ì¤„)
â”œâ”€â”€ src/providers/ThemeProvider.tsx (60ì¤„)
â””â”€â”€ src/providers/AppProvider.tsx (40ì¤„)

Day 5-7: ë©”ì¸ App.tsx ë‹¨ìˆœí™”
â”œâ”€â”€ hooks ë¶„ë¦¬: src/hooks/ (10ê°œ íŒŒì¼)
â”œâ”€â”€ utils ë¶„ë¦¬: src/utils/ (5ê°œ íŒŒì¼)  
â””â”€â”€ App.tsx ìµœì¢…: 50ì¤„ ì´í•˜
```

### P1-2: Rate Limiting êµ¬í˜„ (1ì¼)
```typescript
// src/middleware/rateLimiter.ts
import rateLimit from 'express-rate-limit';

export const createRateLimiter = (windowMs: number, max: number, message: string) => 
  rateLimit({
    windowMs,
    max,
    message: { error: message, code: 'RATE_LIMIT_EXCEEDED' },
    standardHeaders: true,
    legacyHeaders: false,
    handler: (req, res) => {
      console.warn(`Rate limit exceeded: ${req.ip} ${req.path}`);
      res.status(429).json({ 
        error: message, 
        retryAfter: Math.ceil(windowMs / 1000) 
      });
    }
  });

// ì ìš©í•  ì œí•œ ì •ì±…
export const limiters = {
  auth: createRateLimiter(15 * 60 * 1000, 5, 'Too many authentication attempts'),
  api: createRateLimiter(1 * 60 * 1000, 100, 'Too many API requests'),
  admin: createRateLimiter(5 * 60 * 1000, 10, 'Admin API rate limit exceeded'),
  export: createRateLimiter(10 * 60 * 1000, 3, 'Export rate limit exceeded')
};
```

### P1-3: ë²ˆë“¤ í¬ê¸° ìµœì í™” (3ì¼)
**í˜„ì¬**: main.js 315.67 kB (gzipped)  
**ëª©í‘œ**: 200 kB ì´í•˜  
**ì˜ˆìƒ ê°œì„ **: í˜ì´ì§€ ë¡œë”© ì†ë„ 40% í–¥ìƒ

```typescript
// Day 1: ì½”ë“œ ë¶„í•  ì ìš©
const AdminDashboard = lazy(() => import('./components/admin/PersonalServiceDashboard'));
const AnalysisDashboard = lazy(() => import('./components/analysis/ResultsAnalysis'));

// Day 2: Tree shaking ìµœì í™”
// webpack.config.js ìˆ˜ì • ë˜ëŠ” package.json ìµœì í™”

// Day 3: ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„± ì œê±°
// - ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‹ë³„ ë° ì œê±°
// - lodash â†’ ê°œë³„ í•¨ìˆ˜ import
```

---

## ğŸŸ¡ P2: ì¤‘ê°„ (Medium) - 3ê°œì›” ë‚´ ì²˜ë¦¬

### ğŸ¯ ìš°ì„ ìˆœìœ„ ì ìˆ˜ ê³„ì‚° ë°©ì‹
```
ìš°ì„ ìˆœìœ„ ì ìˆ˜ = (ì˜í–¥ë„ Ã— 4) + (ê¸´ê¸‰ë„ Ã— 3) + (êµ¬í˜„ìš©ì´ì„± Ã— 2) + (ROI Ã— 3)
```

| ì‘ì—…ëª… | ì˜í–¥ë„ | ê¸´ê¸‰ë„ | ìš©ì´ì„± | ROI | ì´ì  | ìˆœìœ„ |
|--------|--------|--------|--------|-----|------|------|
| í…ŒìŠ¤íŠ¸ ìë™í™” | 8 | 6 | 7 | 9 | 78 | P2-1 |
| API ë¬¸ì„œí™” | 7 | 5 | 8 | 8 | 72 | P2-2 |
| ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ | 8 | 7 | 6 | 7 | 74 | P2-3 |
| DB ìŠ¤í‚¤ë§ˆ ì •ë¦¬ | 6 | 8 | 9 | 6 | 71 | P2-4 |
| ì—ëŸ¬ ì¶”ì  ì‹œìŠ¤í…œ | 7 | 6 | 7 | 7 | 70 | P2-5 |

### P2-1: í…ŒìŠ¤íŠ¸ ìë™í™” í™•ëŒ€ (4ì£¼)
**ëª©í‘œ**: í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 30% â†’ 80%

```
ì£¼ì°¨ 1: í”„ë¡ íŠ¸ì—”ë“œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ (PersonalServiceDashboard ë“±)
â”œâ”€â”€ Utility í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ (AHP Calculator ë“±)
â”œâ”€â”€ Hook í…ŒìŠ¤íŠ¸ (useAuth, useTheme ë“±)

ì£¼ì°¨ 2: ë°±ì—”ë“œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸  
â”œâ”€â”€ API ë¼ìš°í„° í…ŒìŠ¤íŠ¸ (auth, projects, evaluators)
â”œâ”€â”€ ì„œë¹„ìŠ¤ ë ˆì´ì–´ í…ŒìŠ¤íŠ¸ (userService, ahpCalculator)
â””â”€â”€ ë¯¸ë“¤ì›¨ì–´ í…ŒìŠ¤íŠ¸ (auth, validation)

ì£¼ì°¨ 3: í†µí•© í…ŒìŠ¤íŠ¸
â”œâ”€â”€ API ì—”ë“œí¬ì¸íŠ¸ í†µí•© í…ŒìŠ¤íŠ¸
â”œâ”€â”€ ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ í…ŒìŠ¤íŠ¸
â””â”€â”€ ì¸ì¦ í”Œë¡œìš° í…ŒìŠ¤íŠ¸

ì£¼ì°¨ 4: E2E í…ŒìŠ¤íŠ¸
â”œâ”€â”€ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ (ë¡œê·¸ì¸â†’í”„ë¡œì íŠ¸ìƒì„±â†’ë¶„ì„)
â”œâ”€â”€ í‰ê°€ì ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
â””â”€â”€ ê´€ë¦¬ì ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
```

### P2-2: API ë¬¸ì„œí™” (OpenAPI/Swagger) (2ì£¼)
```yaml
# swagger.yaml
openapi: 3.0.0
info:
  title: AHP Platform API
  version: 2.3.2
  description: Analytic Hierarchy Process Decision Support System

paths:
  /api/auth/login:
    post:
      summary: User authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  minLength: 8
      responses:
        200:
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        401:
          description: Invalid credentials
```

---

## ğŸŸ¢ ë‚®ì€ ìš°ì„ ìˆœìœ„ ê°œì„ ì‚¬í•­ (Low - 6ê°œì›” ë‚´ ì²˜ë¦¬)

### 1. ì•„í‚¤í…ì²˜ í˜„ëŒ€í™”

#### ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„ë¦¬ ê²€í† 
```typescript
// ê¶Œì¥ ì„œë¹„ìŠ¤ ë¶„ë¦¬ êµ¬ì¡°
/*
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Auth Service  â”‚ Project Service â”‚Analysis Service â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - ì‚¬ìš©ì ì¸ì¦   â”‚ - í”„ë¡œì íŠ¸ ê´€ë¦¬ â”‚ - AHP ê³„ì‚°      â”‚
â”‚ - JWT ê´€ë¦¬      â”‚ - í‰ê°€ì ë°°ì •   â”‚ - ê²°ê³¼ ë¶„ì„     â”‚
â”‚ - ê¶Œí•œ ê´€ë¦¬     â”‚ - ë°ì´í„° CRUD   â”‚ - ë¯¼ê°ë„ ë¶„ì„   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                    API Gateway
                          â”‚
                   Frontend (React)
*/
```

#### ìºì‹± ì‹œìŠ¤í…œ ë„ì…
```typescript
// Redis ìºì‹± ì „ëµ
import Redis from 'redis';

const redis = Redis.createClient({
  url: process.env.REDIS_URL
});

// í”„ë¡œì íŠ¸ ë°ì´í„° ìºì‹± (15ë¶„)
export const getCachedProject = async (projectId: string) => {
  const cached = await redis.get(`project:${projectId}`);
  if (cached) {
    return JSON.parse(cached);
  }
  
  const project = await fetchProjectFromDB(projectId);
  await redis.setex(`project:${projectId}`, 900, JSON.stringify(project));
  return project;
};
```

### 2. ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

#### PWA ë³€í™˜
```typescript
// src/serviceWorker.ts
const CACHE_NAME = 'ahp-platform-v2.3.2';
const urlsToCache = [
  '/',
  '/static/js/bundle.js',
  '/static/css/main.css'
];

self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(cache => cache.addAll(urlsToCache))
  );
});
```

#### ì ‘ê·¼ì„± ì™„ì „ ì§€ì›
```typescript
// src/components/common/AccessibilityProvider.tsx
import { createContext, useContext } from 'react';

interface AccessibilityContext {
  announceMessage: (message: string) => void;
  focusElement: (elementId: string) => void;
  skipToContent: () => void;
}

export const AccessibilityProvider = ({ children }) => {
  const announceMessage = (message: string) => {
    const announcement = document.createElement('div');
    announcement.setAttribute('aria-live', 'polite');
    announcement.setAttribute('aria-atomic', 'true');
    announcement.className = 'sr-only';
    announcement.textContent = message;
    
    document.body.appendChild(announcement);
    setTimeout(() => document.body.removeChild(announcement), 1000);
  };
  
  return (
    <AccessibilityContext.Provider value={{ announceMessage, focusElement, skipToContent }}>
      {children}
    </AccessibilityContext.Provider>
  );
};
```

---

## ğŸ“‚ êµ¬ì²´ì ì¸ íŒŒì¼ë³„ ê°œì„  ì œì•ˆ

### í”„ë¡ íŠ¸ì—”ë“œ í•µì‹¬ íŒŒì¼

#### 1. `src/App.tsx` (1,774ì¤„ â†’ 50ì¤„ë¡œ ì¶•ì†Œ)
```typescript
// í˜„ì¬ êµ¬ì¡°ì˜ ë¬¸ì œì 
- 20ê°œ ì´ìƒì˜ useState í›…
- ë¼ìš°íŒ…, ì¸ì¦, API, í…Œë§ˆ ê´€ë¦¬ í˜¼ì¬
- ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìœ„í—˜ (useEffect cleanup ë¶€ì¡±)

// ê°œì„  ë°©í–¥
1. Router ë¶„ë¦¬ â†’ src/router/AppRouter.tsx
2. Context Provider ë¶„ë¦¬ â†’ src/providers/
3. Custom Hook ë¶„ë¦¬ â†’ src/hooks/
4. ìƒìˆ˜ê°’ ë¶„ë¦¬ â†’ src/constants/
```

#### 2. `src/services/apiService.ts` (ìµëª… export ë¬¸ì œ)
```typescript
// í˜„ì¬ (ESLint ê²½ê³ )
export default {
  baseURL: process.env.REACT_APP_API_URL,
  // ...
};

// ê°œì„ ì•ˆ
export const apiConfig = {
  baseURL: process.env.REACT_APP_API_URL || 'https://ahp-platform.onrender.com/api',
  timeout: 30000,
  retryAttempts: 3
};

export default apiConfig;
```

### ë°±ì—”ë“œ í•µì‹¬ íŒŒì¼

#### 3. `backend/src/index.ts` (ë³´ì•ˆ ì·¨ì•½ ì—”ë“œí¬ì¸íŠ¸ ì •ë¦¬)
```typescript
// ì œê±° ëŒ€ìƒ ì—”ë“œí¬ì¸íŠ¸ë“¤
app.post('/api/admin/migrate');                    // ìœ„í—˜: ë¬´ì¸ì¦ DB ì¡°ì‘
app.post('/api/emergency/cleanup-phantom-projects'); // ìœ„í—˜: ë¬´ì¸ì¦ ë°ì´í„° ì‚­ì œ
app.get('/api/debug/*');                           // ìœ„í—˜: ë¯¼ê°ì •ë³´ ë…¸ì¶œ

// ë³´ì•ˆ ê°•í™” ì ìš©
app.use('/api/admin/*', [
  authenticateToken,
  requireRole(['super_admin']),
  auditLogger
]);
```

#### 4. `backend/src/routes/evaluators.ts` (âœ… ì´ë¯¸ ê°œì„  ì™„ë£Œ)
- handleDatabaseError í—¬í¼ í•¨ìˆ˜ ì¶”ê°€ë¨
- êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€ ì œê³µ
- 9ê°œ API ì—”ë“œí¬ì¸íŠ¸ ì—ëŸ¬ ì²˜ë¦¬ í†µì¼í™”

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ê°œì„  ê³„íš

### 1. ìŠ¤í‚¤ë§ˆ ìµœì í™”

#### ì¤‘ë³µ í…Œì´ë¸” ì •ë¦¬
```sql
-- ì œê±°í•  ì¤‘ë³µ í…Œì´ë¸”ë“¤
DROP TABLE IF EXISTS pairwise_comparisons_backup;
DROP TABLE IF EXISTS criteria_backup;
DROP TABLE IF EXISTS projects_old;

-- ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìˆœì„œ ì¬ì •ë¦¬
-- 004_complete_ahp_schema.sqlê³¼ 004_user_profile_fields.sql í†µí•©
```

#### ì„±ëŠ¥ ì¸ë±ìŠ¤ ì¶”ê°€
```sql
-- 1. ë³µí•© ì¸ë±ìŠ¤ (ê°€ì¥ ë¹ˆë²ˆí•œ ì¿¼ë¦¬ìš©)
CREATE INDEX CONCURRENTLY idx_projects_admin_status_date 
ON projects(admin_id, status, created_at);

-- 2. ë¶€ë¶„ ì¸ë±ìŠ¤ (í™œì„± ì‚¬ìš©ìë§Œ)
CREATE INDEX CONCURRENTLY idx_users_active_email 
ON users(email) WHERE is_active = true;

-- 3. í•¨ìˆ˜ ê¸°ë°˜ ì¸ë±ìŠ¤ (ê²€ìƒ‰ ìµœì í™”)
CREATE INDEX CONCURRENTLY idx_projects_title_lower 
ON projects(LOWER(title));

-- 4. JSONB ì¸ë±ìŠ¤
CREATE INDEX CONCURRENTLY idx_workshop_config 
ON workshop_sessions USING gin(session_config);
```

### 2. ë°±ì—… ë° ë³µêµ¬ ì‹œìŠ¤í…œ

#### ìë™ ë°±ì—… ì „ëµ
```bash
#!/bin/bash
# scripts/backup-database.sh

DB_NAME="ahp_postgresql"
BACKUP_DIR="/backups/$(date +%Y-%m)"
BACKUP_FILE="$BACKUP_DIR/ahp-backup-$(date +%Y%m%d-%H%M%S).sql"

# ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p $BACKUP_DIR

# ë°±ì—… ì‹¤í–‰
pg_dump $DATABASE_URL > $BACKUP_FILE

# ì••ì¶•
gzip $BACKUP_FILE

# 7ì¼ ì´ìƒëœ ë°±ì—… íŒŒì¼ ì‚­ì œ
find /backups -name "*.sql.gz" -mtime +7 -delete

echo "Backup completed: $BACKUP_FILE.gz"
```

---

## ğŸ”§ ë°°í¬ ë° ì¸í”„ë¼ ê°œì„ 

### 1. GitHub Actions ì›Œí¬í”Œë¡œìš° ê°•í™”

#### ë³´ì•ˆ í…ŒìŠ¤íŠ¸ ì¶”ê°€
```yaml
# .github/workflows/security-check.yml
name: Security Check
on: [push, pull_request]
jobs:
  security-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Run npm audit
        run: npm audit --audit-level=moderate
        
      - name: CodeQL Analysis
        uses: github/codeql-action/analyze@v2
        with:
          languages: typescript, javascript
          
      - name: Dependency Check
        uses: dependency-check/Dependency-Check_Action@main
        with:
          project: 'AHP Platform'
          path: '.'
          format: 'HTML'
```

#### í”„ë¡œë•ì…˜ ë°°í¬ ì•ˆì •í™”
```yaml
# .github/workflows/production-deploy.yml
name: Production Deploy
on:
  release:
    types: [published]
    
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Run full test suite
        run: npm run test:full
        
      - name: Build and validate
        run: |
          npm run build:all
          npm run validate:build
          
      - name: Deploy to production
        env:
          RENDER_API_KEY: ${{ secrets.RENDER_API_KEY }}
        run: npm run deploy:production
        
      - name: Health check
        run: npm run health:check:production
```

### 2. í™˜ê²½ ì„¤ì • ë³´ì•ˆ ê°•í™”

#### í™˜ê²½ë³€ìˆ˜ ê²€ì¦
```typescript
// src/config/environment.ts
interface EnvironmentConfig {
  NODE_ENV: 'development' | 'production' | 'test';
  PORT: number;
  DATABASE_URL: string;
  JWT_SECRET: string;
  JWT_REFRESH_SECRET: string;
  CORS_ORIGIN: string;
}

export const validateEnvironment = (): EnvironmentConfig => {
  const requiredVars = [
    'DATABASE_URL',
    'JWT_SECRET',
    'JWT_REFRESH_SECRET'
  ];
  
  const missing = requiredVars.filter(name => !process.env[name]);
  
  if (missing.length > 0) {
    throw new Error(`Missing required environment variables: ${missing.join(', ')}`);
  }
  
  return {
    NODE_ENV: process.env.NODE_ENV as any || 'development',
    PORT: parseInt(process.env.PORT || '3001'),
    DATABASE_URL: process.env.DATABASE_URL!,
    JWT_SECRET: process.env.JWT_SECRET!,
    JWT_REFRESH_SECRET: process.env.JWT_REFRESH_SECRET!,
    CORS_ORIGIN: process.env.CORS_ORIGIN || 'http://localhost:3000'
  };
};
```

---

## ğŸ“ˆ ë¦¬íŒ©í† ë§ ë¡œë“œë§µ

### Phase 1: ë³´ì•ˆ ê°•í™” (2ì£¼)
```
ì£¼ì°¨ 1:
âœ… JWT Secret í•˜ë“œì½”ë”© ì œê±°
âœ… ê´€ë¦¬ì ì—”ë“œí¬ì¸íŠ¸ ì¸ì¦ ì¶”ê°€  
âœ… ì•½í•œ í•´ì‹± ì•Œê³ ë¦¬ì¦˜ êµì²´
âœ… Rate limiting êµ¬í˜„

ì£¼ì°¨ 2:
âœ… CORS ë³´ì•ˆ ì •ì±… ê°•í™”
âœ… SQL Injection ë°©ì–´ ê°œì„ 
âœ… ì—ëŸ¬ ë©”ì‹œì§€ ì •ë³´ ë…¸ì¶œ ë°©ì§€
âœ… í™˜ê²½ë³€ìˆ˜ ê²€ì¦ ë¡œì§ ì¶”ê°€
```

### Phase 2: ì„±ëŠ¥ ìµœì í™” (1ê°œì›”)
```
ì£¼ì°¨ 1-2: í”„ë¡ íŠ¸ì—”ë“œ
âœ… App.tsx ì»´í¬ë„ŒíŠ¸ ë¶„í• 
âœ… ë²ˆë“¤ í¬ê¸° ìµœì í™” (ì½”ë“œ ë¶„í• )
âœ… ë©”ëª¨ì´ì œì´ì…˜ ì ìš©
âœ… ì§€ì—° ë¡œë”© êµ¬í˜„

ì£¼ì°¨ 3-4: ë°±ì—”ë“œ
âœ… ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤ ìµœì í™”
âœ… ì¿¼ë¦¬ ì„±ëŠ¥ ê°œì„ 
âœ… ìºì‹± ì‹œìŠ¤í…œ ë„ì…
âœ… API ì‘ë‹µ ìµœì í™”
```

### Phase 3: í’ˆì§ˆ ë° ëª¨ë‹ˆí„°ë§ (2ê°œì›”)
```
ì›” 1: í…ŒìŠ¤íŠ¸ ìë™í™”
âœ… ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í™•ëŒ€ (80% ì»¤ë²„ë¦¬ì§€)
âœ… í†µí•© í…ŒìŠ¤íŠ¸ êµ¬í˜„
âœ… E2E í…ŒìŠ¤íŠ¸ ì¶”ê°€
âœ… ìë™í™”ëœ í’ˆì§ˆ ê²€ì‚¬

ì›” 2: ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
âœ… ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ êµ¬ì¶•
âœ… ì—ëŸ¬ ì¶”ì  ì‹œìŠ¤í…œ
âœ… ë¡œê¹… ì¤‘ì•™í™”
âœ… ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬ì¶•
```

### Phase 4: ê³ ë„í™” (3ê°œì›”)
```
ì›” 1: ì•„í‚¤í…ì²˜ ê°œì„ 
âœ… ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì„¤ê³„
âœ… API Gateway ë„ì…
âœ… ì„œë¹„ìŠ¤ ë¶„ë¦¬

ì›” 2: ì‚¬ìš©ì ê²½í—˜
âœ… PWA ë³€í™˜
âœ… ì˜¤í”„ë¼ì¸ ì§€ì›
âœ… ì ‘ê·¼ì„± ì™„ì „ ì§€ì›

ì›” 3: ìš´ì˜ ìµœì í™”
âœ… ìë™í™”ëœ ë°±ì—…/ë³µêµ¬
âœ… ë¬´ì¤‘ë‹¨ ë°°í¬ ì‹œìŠ¤í…œ
âœ… í™•ì¥ì„± í…ŒìŠ¤íŠ¸
```

---

## ğŸ“‹ ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ê°œì„  ì‚¬í•­

### 1. .gitignore ê°œì„ 
```gitignore
# Dependencies
node_modules/
*/node_modules/

# Build outputs
build/
dist/
*/build/
*/dist/

# Environment files
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Coverage directory used by tools like istanbul
coverage/

# OS generated files
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# IDE
.vscode/
.idea/
*.swp
*~

# Temporary files
*.tmp
*.temp

# Database
*.sqlite
*.db
```

### 2. package.json ìŠ¤í¬ë¦½íŠ¸ ìµœì í™”
```json
{
  "scripts": {
    "start": "cd backend && node dist/index.js",
    "dev": "concurrently \"npm run backend:dev\" \"npm run frontend:dev\"",
    "build:all": "npm run build:frontend && npm run build:backend",
    "test:all": "npm run test:frontend && npm run test:backend",
    "lint:all": "npm run lint:frontend && npm run lint:backend",
    "security:audit": "npm audit && cd backend && npm audit",
    "health:check": "curl -f http://localhost:3001/api/health || exit 1"
  }
}
```

### 3. TypeScript ì„¤ì • ê°•í™”
```json
// tsconfig.json
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "noImplicitReturns": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "exactOptionalPropertyTypes": true
  },
  "include": [
    "src/**/*"
  ],
  "exclude": [
    "node_modules",
    "build",
    "dist"
  ]
}
```

---

## ğŸ¯ ì„±ê³µ ì§€í‘œ (KPI)

### ë³´ì•ˆ
- [ ] ì·¨ì•½ì  ìŠ¤ìº” ê²°ê³¼: 0ê°œ Critical, 2ê°œ ì´í•˜ High
- [ ] ë³´ì•ˆ ê°ì‚¬ í†µê³¼ìœ¨: 95% ì´ìƒ
- [ ] ì¹¨íˆ¬ í…ŒìŠ¤íŠ¸ í†µê³¼

### ì„±ëŠ¥  
- [ ] í˜ì´ì§€ ë¡œë”© ì‹œê°„: 3ì´ˆ ì´í•˜
- [ ] API ì‘ë‹µ ì‹œê°„: 500ms ì´í•˜
- [ ] ë²ˆë“¤ í¬ê¸°: 200KB ì´í•˜ (gzipped)
- [ ] Lighthouse ì ìˆ˜: 90ì  ì´ìƒ

### í’ˆì§ˆ
- [ ] í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€: 80% ì´ìƒ
- [ ] ESLint ì—ëŸ¬: 0ê°œ
- [ ] TypeScript ì—ëŸ¬: 0ê°œ
- [ ] ì½”ë“œ ë³µì¡ë„: 10 ì´í•˜ (í•¨ìˆ˜ë‹¹)

### ìš´ì˜
- [ ] ë°°í¬ ì„±ê³µë¥ : 98% ì´ìƒ
- [ ] MTTR (í‰ê·  ë³µêµ¬ ì‹œê°„): 30ë¶„ ì´í•˜
- [ ] ê°€ìš©ë¥ : 99.5% ì´ìƒ

---

## ğŸ’¡ ê²°ë¡  ë° ê¶Œê³ ì‚¬í•­

### ğŸ† ì£¼ìš” ê°•ì 
1. **ì²´ê³„ì ì¸ ì•„í‚¤í…ì²˜**: React + TypeScript + Node.jsì˜ í˜„ëŒ€ì  ìŠ¤íƒ
2. **í’ë¶€í•œ ë¬¸ì„œí™”**: 118ê°œì˜ ìƒì„¸í•œ ê°œë°œ ë¬¸ì„œ
3. **ê¸°ëŠ¥ ì™„ì„±ë„**: AHP ë¶„ì„ì˜ ë³µì¡í•œ ìš”êµ¬ì‚¬í•­ì„ ì˜ êµ¬í˜„
4. **í™•ì¥ì„±**: ëª¨ë“ˆí˜• ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ë¡œ í™•ì¥ ìš©ì´

### âš ï¸ ì£¼ìš” ê°œì„  í•„ìš”ì‚¬í•­
1. **ë³´ì•ˆ ê°•í™”**: JWT, CORS, SQL Injection ë°©ì–´ ê°œì„ 
2. **ì„±ëŠ¥ ìµœì í™”**: ì½”ë“œ ë¶„í• , ìºì‹±, ì¸ë±ì‹± ì ìš©
3. **ì½”ë“œ í’ˆì§ˆ**: App.tsx ë¶„í• , í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í™•ëŒ€
4. **ìš´ì˜ ì•ˆì •ì„±**: ëª¨ë‹ˆí„°ë§, ë°±ì—…, ì—ëŸ¬ ì¶”ì  ì‹œìŠ¤í…œ êµ¬ì¶•

### ğŸš€ ìµœì¢… ê¶Œê³ 
ì´ AHP í”Œë«í¼ì€ **ê¸°ëŠ¥ì ìœ¼ë¡œëŠ” ì™„ì„±ë„ê°€ ë†’ì€ ì‹œìŠ¤í…œ**ì´ì§€ë§Œ, **ìƒìš© ì„œë¹„ìŠ¤ ìˆ˜ì¤€ì˜ ë³´ì•ˆì„±ê³¼ ì•ˆì •ì„±**ì„ ìœ„í•´ì„œëŠ” ì œì‹œëœ ê°œì„  ì‚¬í•­ë“¤ì„ **ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ì²´ê³„ì ìœ¼ë¡œ ì ìš©**í•  ê²ƒì„ ê°•ë ¥íˆ ê¶Œê³ í•©ë‹ˆë‹¤.

íŠ¹íˆ **ë³´ì•ˆ ì·¨ì•½ì ë“¤ì€ ì¦‰ì‹œ ìˆ˜ì •**ë˜ì–´ì•¼ í•˜ë©°, ì´í›„ **ì„±ëŠ¥ ìµœì í™”ì™€ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì¶•**ì„ í†µí•´ ì•ˆì •ì ì¸ ìƒìš© ì„œë¹„ìŠ¤ë¡œ ë°œì „ì‹œí‚¬ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

---

## ğŸ“ í›„ì† ì¡°ì¹˜

### ì¦‰ì‹œ ì¡°ì¹˜ (ì´ë²ˆ ì£¼)
1. **ë³´ì•ˆ íŒ¨ì¹˜ ë°°í¬**: ì·¨ì•½ì  ìˆ˜ì • í›„ ê¸´ê¸‰ ë°°í¬
2. **ëª¨ë‹ˆí„°ë§ ì„¤ì •**: ê¸°ë³¸ì ì¸ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ í™œì„±í™”
3. **ë°±ì—… ì‹œìŠ¤í…œ**: ìë™ ë°±ì—… ìŠ¤ì¼€ì¤„ ì„¤ì •

### ë‹¨ê¸° ì¡°ì¹˜ (ì´ë²ˆ ë‹¬)
1. **ì½”ë“œ ë¦¬íŒ©í† ë§**: App.tsx ë¶„í•  ë° ìµœì í™”
2. **í…ŒìŠ¤íŠ¸ í™•ëŒ€**: í•µì‹¬ ê¸°ëŠ¥ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€
3. **API ë¬¸ì„œí™”**: OpenAPI ëª…ì„¸ì„œ ì‘ì„±

### ì¥ê¸° ì¡°ì¹˜ (3-6ê°œì›”)
1. **ì•„í‚¤í…ì²˜ í˜ì‹ **: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜ ê²€í† 
2. **ì‚¬ìš©ì ê²½í—˜**: PWA, ì ‘ê·¼ì„±, ë‹¤êµ­ì–´ ì§€ì›
3. **ìš´ì˜ ìë™í™”**: CI/CD ê³ ë„í™”, ë¬´ì¤‘ë‹¨ ë°°í¬

---

**ë³´ê³ ì„œ ìƒì„±ì¼**: 2025-09-02  
**ê²€í†  ë²”ìœ„**: ì „ì²´ ì†ŒìŠ¤ì½”ë“œ + ì¸í”„ë¼ + ë¬¸ì„œ  
**ì´ ê²€í†  ì‹œê°„**: 3ì‹œê°„  
**ë‹¤ìŒ ê²€í†  ê¶Œì¥ì¼**: 2025-10-02 (ë§¤ì›” ì •ê¸° ê²€í† )
