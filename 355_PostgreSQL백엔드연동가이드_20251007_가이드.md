# AHP Platform - PostgreSQL ë°±ì—”ë“œ ì—°ë™ ê°€ì´ë“œ

## ğŸ¯ ê°œìš”

AHP í”Œë«í¼ì´ Django ë°±ì—”ë“œì™€ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í†µí•´ ì™„ì „íˆ ì‘ë™í•˜ë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.

## ğŸ› ï¸ ë°±ì—”ë“œ ì„¤ì • (Django + PostgreSQL)

### 1. ë°±ì—”ë“œ ì„œë²„ ì‹œì‘

```bash
# ë°©ë²• 1: ë°°ì¹˜ íŒŒì¼ ì‚¬ìš© (Windows)
start_backend.bat

# ë°©ë²• 2: ìˆ˜ë™ ì‹¤í–‰
cd django_backend
pip install -r requirements.txt
python manage.py migrate
python manage.py runserver 0.0.0.0:8000
```

### 2. ì„¤ì • íŒŒì¼ í™•ì¸

Django ë°±ì—”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •ë¨:

**PostgreSQL ì—°ê²°:**
- Database: `ahp_app` (Render.com PostgreSQL)
- ëª¨ë“  í…Œì´ë¸” ìë™ ìƒì„±ë¨ (ë§ˆì´ê·¸ë ˆì´ì…˜)
- settings í•„ë“œë¡œ ë©”íƒ€ë°ì´í„° ì €ì¥ ì§€ì›

**API ì—”ë“œí¬ì¸íŠ¸:**
- ê¸°ë³¸ API: `http://localhost:8000/api/`
- ì„œë¹„ìŠ¤ API: `http://localhost:8000/api/service/`
- í”„ë¡œì íŠ¸: `/api/service/projects/projects/`
- ê¸°ì¤€: `/api/service/projects/criteria/`

### 3. ê¶Œí•œ ì„¤ì •

ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì¸ì¦ ì—†ì´ ëª¨ë“  API ì ‘ê·¼ ê°€ëŠ¥:
- `ProjectViewSet`: `permissions.AllowAny`
- `CriteriaViewSet`: `permissions.AllowAny` (ìˆ˜ì •ë¨)

## ğŸš€ í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •

### 1. API ì—°ê²° ì„¤ì •

í”„ë¡ íŠ¸ì—”ë“œê°€ ë¡œì»¬ ë°±ì—”ë“œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •ë¨:
- ê°œë°œ í™˜ê²½: `http://localhost:8000`
- í”„ë¡œë•ì…˜: `https://ahp-django-backend.onrender.com`

### 2. ê¸°ì¤€ ì¶”ê°€ ë¡œì§ ê°œì„ 

ì´ì¤‘ ë°©ì–´ ì‹œìŠ¤í…œ êµ¬í˜„:
1. **1ì°¨ ì‹œë„**: í”„ë¡œì íŠ¸ settings í•„ë“œ ì—…ë°ì´íŠ¸
2. **2ì°¨ ì‹œë„**: Django criteria API ì§ì ‘ í˜¸ì¶œ
3. **ìƒì„¸ ë¡œê¹…**: ê° ë‹¨ê³„ë³„ ì‹¤íŒ¨ ì›ì¸ ë¶„ì„

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ë°±ì—”ë“œ ì—°ê²° í…ŒìŠ¤íŠ¸

```bash
# Node.jsë¡œ ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤í–‰
node test_backend_connection.js
```

í…ŒìŠ¤íŠ¸ í•­ëª©:
- âœ… Health Check
- âœ… Database Status 
- âœ… API Endpoints
- âœ… Project CRUD
- âœ… Criteria CRUD

### 2. ì „ì²´ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸

1. **í”„ë¡œì íŠ¸ ìƒì„±**: ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
2. **ëª¨ë¸ êµ¬ì¶•**: ìë™ìœ¼ë¡œ model-builder í˜ì´ì§€ë¡œ ì´ë™
3. **ê¸°ì¤€ ì¶”ê°€**: ê¸°ì¤€ ì¶”ê°€ ë° ì €ì¥
4. **ì‹œê°í™”**: HierarchyTreeVisualization í™•ì¸
5. **ì¼ê´„ ì…ë ¥**: BulkCriteriaInput í…ŒìŠ¤íŠ¸

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### Project ëª¨ë¸
```python
class Project(models.Model):
    id = models.UUIDField(primary_key=True)
    title = models.CharField(max_length=200)
    description = models.TextField()
    settings = models.JSONField(default=dict)  # ë©”íƒ€ë°ì´í„° ì €ì¥
    status = models.CharField(choices=STATUS_CHOICES)
    # ... ê¸°íƒ€ í•„ë“œ
```

### Criteria ëª¨ë¸
```python
class Criteria(models.Model):
    project = models.ForeignKey(Project)
    name = models.CharField(max_length=200)
    description = models.TextField()
    type = models.CharField(choices=TYPE_CHOICES)
    parent = models.ForeignKey('self', null=True)
    level = models.PositiveIntegerField()
    order = models.PositiveIntegerField()
    # ... ê¸°íƒ€ í•„ë“œ
```

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: "í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: API ìš”ì²­ ì‹¤íŒ¨"
**í•´ê²°ë¨**: 
- API updateProjectì— settings í•„ë“œ ì§€ì› ì¶”ê°€
- CriteriaViewSet ê¶Œí•œì„ AllowAnyë¡œ ë³€ê²½
- ì´ì¤‘ ë°©ì–´ ì‹œìŠ¤í…œìœ¼ë¡œ ë°±ì—… API í˜¸ì¶œ

### ë¬¸ì œ 2: ê¸°ì¤€ ì¶”ê°€ í›„ ì‹œê°í™” ì•ˆë¨
**í•´ê²°ë¨**:
- settings í•„ë“œë¥¼ í†µí•œ ë©”íƒ€ë°ì´í„° ì €ì¥
- getCriteriaì—ì„œ í”„ë¡œì íŠ¸ settings ì¡°íšŒ
- HierarchyTreeVisualization ë°ì´í„° ì—°ë™

### ë¬¸ì œ 3: í”„ë¡œì íŠ¸ ì‚­ì œ ì˜¤ë¥˜
**í•´ê²°ë¨**:
- ì˜¬ë°”ë¥¸ API ì—”ë“œí¬ì¸íŠ¸ ì‚¬ìš©
- ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 

## ğŸ‰ ì™„ë£Œëœ ê¸°ëŠ¥

âœ… **PostgreSQL ì™„ì „ ì—°ë™**
âœ… **í”„ë¡œì íŠ¸ ìƒì„± â†’ ëª¨ë¸êµ¬ì¶• ìë™ ì´ë™**
âœ… **ê¸°ì¤€ ì¶”ê°€ ë° ì €ì¥**
âœ… **ê³„ì¸µêµ¬ì¡° ì‹œê°í™”**
âœ… **ì¼ê´„ ê¸°ì¤€ ì…ë ¥**
âœ… **í”„ë¡œì íŠ¸ ì‚­ì œ ë° ë³µì›**
âœ… **ìƒì„¸ ë¡œê¹… ë° ë””ë²„ê¹…**

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

1. **ë°±ì—”ë“œ ì„œë²„ ì‹œì‘**: `start_backend.bat`
2. **ì—°ê²° í…ŒìŠ¤íŠ¸**: `node test_backend_connection.js`
3. **í”„ë¡ íŠ¸ì—”ë“œ ì‹œì‘**: `npm start`
4. **ì „ì²´ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸**: í”„ë¡œì íŠ¸ ìƒì„±ë¶€í„° ê¸°ì¤€ ì¶”ê°€ê¹Œì§€

ì´ì œ AHP í”Œë«í¼ì´ PostgreSQLê³¼ ì™„ì „íˆ ì—°ë™ë˜ì–´ ì•ˆì •ì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤!