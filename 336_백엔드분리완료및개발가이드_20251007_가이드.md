# 백엔드 분리 완료 및 개발 가이드

**업데이트 일시**: 2025-09-28  
**작업자**: Claude Code Assistant  
**변경사항**: 백엔드 Repository 분리 완료

---

## 🎯 **새로운 아키텍처 구조**

### **2-Repository 구조**

#### **Frontend Repository (기존)**
- **URL**: https://github.com/aebonlee/ahp_app
- **배포**: GitHub Pages (https://aebonlee.github.io/ahp_app/)
- **기술**: React 18 + TypeScript, Tailwind CSS
- **역할**: 사용자 인터페이스, 상태 관리, 라우팅

#### **Backend Repository (신규)**
- **URL**: https://github.com/aebonlee/ahp-django-backend
- **배포**: Render.com (https://ahp-django-backend.onrender.com)
- **기술**: Django 4.2 + DRF, PostgreSQL
- **역할**: API, 비즈니스 로직, 데이터베이스 관리

---

## 🔧 **개발 환경 설정**

### **Frontend 개발**

#### **1. 환경변수 설정**
```bash
# .env.development (로컬 개발)
REACT_APP_API_URL=https://ahp-django-backend.onrender.com
REACT_APP_DATA_MODE=hybrid
REACT_APP_ENV=development

# .env.production (배포)
REACT_APP_API_URL=https://ahp-django-backend.onrender.com
REACT_APP_DATA_MODE=online
REACT_APP_ENV=production
```

#### **2. 개발 서버 실행**
```bash
# 의존성 설치
npm install

# 개발 서버 시작 (분리된 백엔드와 자동 연동)
npm start

# 프로덕션 빌드
npm run build

# GitHub Pages 배포
npm run deploy
```

### **Backend 개발 (필요시)**

#### **1. Repository 클론**
```bash
git clone https://github.com/aebonlee/ahp-django-backend.git
cd ahp-django-backend
```

#### **2. 로컬 개발 설정**
```bash
# 가상환경 생성
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows

# 패키지 설치
pip install -r requirements.txt

# 환경변수 설정 (.env 파일)
DATABASE_URL=postgresql://...
SECRET_KEY=your-secret-key
DEBUG=True

# 데이터베이스 마이그레이션
python manage.py migrate

# 개발 서버 실행
python manage.py runserver
```

---

## 📊 **API 연동 구조**

### **API 베이스 URL**
```typescript
// Frontend에서 사용
const API_BASE_URL = 'https://ahp-django-backend.onrender.com';

// 주요 엔드포인트
/api/v1/projects/          # 프로젝트 관리
/api/v1/criteria/          # 평가기준 관리
/api/v1/evaluations/       # 평가 수행
/api/v1/analysis/          # 결과 분석
/api/auth/                 # 인증 시스템
```

### **CORS 설정**
Backend에서 Frontend 도메인 허용:
```python
# settings.py
CORS_ALLOWED_ORIGINS = [
    "http://localhost:3000",      # 로컬 개발
    "https://aebonlee.github.io", # GitHub Pages
]
```

---

## 🚀 **배포 프로세스**

### **Frontend 배포 (GitHub Pages)**
```bash
# 1. 코드 변경 후 빌드
npm run build

# 2. GitHub에 푸시
git add .
git commit -m "feat: 새 기능 추가"
git push origin main

# 3. GitHub Actions가 자동으로 Pages 배포
```

### **Backend 배포 (Render.com)**
```bash
# 1. Backend Repository에 푸시
cd ahp-django-backend
git add .
git commit -m "feat: API 개선"
git push origin main

# 2. Render.com이 자동으로 재배포
# 3. 약 2-3분 후 새 버전 적용
```

---

## 🔍 **개발 워크플로우**

### **Frontend 위주 개발 (현재 상황)**
```bash
# 1. Frontend 기능 개발
cd D:\ahp
npm start

# 2. 분리된 Backend API 사용
# - MyProjects.tsx ✅ 완성
# - ProjectCreation.tsx 🔄 진행 중
# - CriteriaManagement.tsx ⏳ 대기

# 3. 빌드 및 배포
npm run build
git push origin main
```

### **Full-Stack 개발 (필요시)**
```bash
# 1. Backend 로컬 실행
cd ahp-django-backend
python manage.py runserver # localhost:8000

# 2. Frontend 환경변수 임시 변경
# REACT_APP_API_URL=http://localhost:8000

# 3. Frontend 개발 서버 실행
cd D:\ahp
npm start # localhost:3000

# 4. 양쪽 동시 개발 가능
```

---

## 📋 **현재 개발 우선순위**

### **즉시 처리 항목**

#### **1. ProjectCreation.tsx 완성**
- 일반/퍼지 AHP 모드 선택
- 분리된 Backend API 연동
- 단계별 진행 저장

#### **2. API 엔드포인트 표준화**
- Frontend API 호출 검증
- 에러 핸들링 개선
- 응답 형식 통일

#### **3. CriteriaManagement.tsx 개선**
- 계층구조 CRUD 완성
- 분리된 Backend 모델 연동
- 실시간 트리 시각화

---

## 🎯 **장점 및 성과**

### **개발 효율성 향상**
- ✅ **독립적 개발**: Frontend/Backend 팀 분리 가능
- ✅ **빠른 배포**: 각각 독립적 CI/CD
- ✅ **명확한 책임**: UI vs 비즈니스 로직 분리

### **확장성 확보**
- ✅ **API 버전관리**: 하위 호환성 유지
- ✅ **다중 클라이언트**: 모바일 앱 추가 용이
- ✅ **스케일링**: 각 서비스별 최적화

### **유지보수성 개선**
- ✅ **코드 분리**: 각 Repository 집중 관리
- ✅ **독립 테스트**: Frontend/Backend 별도 테스트
- ✅ **문서화**: 각 Repository별 전문 문서

---

## 🔄 **다음 단계 계획**

### **1주차: API 연동 완성**
- ProjectCreation.tsx Backend 연동
- CriteriaManagement.tsx Backend 연동
- 에러 핸들링 표준화

### **2주차: 평가 시스템 완성**
- PairwiseEvaluation.tsx 개선
- EvaluatorAssignment.tsx 개선
- 실시간 진행률 모니터링

### **3-4주차: 고급 기능 구현**
- 퍼지 AHP 모드 개발
- 결과 분석 시스템 완성
- AI 논문 지원 시스템 기획

---

## 📞 **개발 지원**

### **Repository 정보**
- **Frontend**: https://github.com/aebonlee/ahp_app
- **Backend**: https://github.com/aebonlee/ahp-django-backend

### **배포 URL**
- **Frontend**: https://aebonlee.github.io/ahp_app/
- **Backend**: https://ahp-django-backend.onrender.com

### **문의 및 이슈**
- GitHub Issues를 통한 버그 리포트
- 개발 문서는 각 Repository README 참조

---

**백엔드 분리 완료로 더욱 견고한 아키텍처를 확보했습니다!**  
**이제 Frontend 개발에 집중하여 핵심 기능들을 완성해 나가겠습니다.**