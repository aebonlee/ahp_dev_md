# AHP_forPaper ë°°í¬ ê°€ì´ë“œ

## ğŸ“… ìµœì¢… ì—…ë°ì´íŠ¸
2025ë…„ 2ì›”

## ğŸŒ í˜„ì¬ ë°°í¬ ìƒíƒœ

### í”„ë¡ íŠ¸ì—”ë“œ (GitHub Pages)
- **URL**: https://aebonlee.github.io/AHP_forPaper/
- **ìƒíƒœ**: âœ… ì •ìƒ ìš´ì˜
- **ë¹Œë“œ**: React 19.1.1 + TypeScript 4.9.5
- **ìë™ ë°°í¬**: GitHub Actions í™œì„±í™”

### ë°±ì—”ë“œ (Render.com)
- **URL**: https://ahp-forpaper.onrender.com
- **ìƒíƒœ**: âœ… ì •ìƒ ìš´ì˜
- **Health Check**: https://ahp-forpaper.onrender.com/api/health
- **Runtime**: Node.js 18.x + Express 4.21.2

## ğŸš€ í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬

### GitHub Pages ìë™ ë°°í¬

#### ì„¤ì • íŒŒì¼
```yaml
# .github/workflows/pages.yml
name: Deploy to GitHub Pages
on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build
        run: npm run build:frontend
      
      - name: Upload Pages artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: build
      
      - name: Deploy to GitHub Pages
        uses: actions/deploy-pages@v4
```

#### ìˆ˜ë™ ë°°í¬
```bash
# ë¡œì»¬ì—ì„œ ë¹Œë“œ ë° ë°°í¬
npm run build:frontend
npm run deploy

# ë˜ëŠ” ê°œë³„ ëª…ë ¹ì–´
npm run predeploy  # ë¹Œë“œ ì‹¤í–‰
gh-pages -d build  # GitHub Pagesì— ë°°í¬
```

#### package.json ì„¤ì •
```json
{
  "homepage": "https://aebonlee.github.io/AHP_forPaper/",
  "scripts": {
    "build:frontend": "react-scripts build",
    "predeploy": "npm run build:frontend", 
    "deploy": "gh-pages -d build"
  }
}
```

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```env
# í”„ë¡œë•ì…˜ í™˜ê²½
REACT_APP_API_URL=https://ahp-forpaper.onrender.com
PUBLIC_URL=https://aebonlee.github.io/AHP_forPaper/

# ê°œë°œ í™˜ê²½  
REACT_APP_API_URL=http://localhost:5000
PUBLIC_URL=/
```

## ğŸ”§ ë°±ì—”ë“œ ë°°í¬

### Render.com í˜„ì¬ ì„¤ì •

#### ì„œë¹„ìŠ¤ ì •ë³´
```yaml
Name: ahp-forpaper
Type: Web Service
Region: Oregon (US West)
Instance Type: Free Tier
```

#### ë¹Œë“œ ì„¤ì •
```yaml
Root Directory: backend
Build Command: npm install && npm run build
Start Command: npm start
```

#### í™˜ê²½ ë³€ìˆ˜
```env
NODE_ENV=production
NODE_VERSION=18
PORT=10000
DATABASE_URL=[PostgreSQL ì—°ê²° ë¬¸ìì—´]
JWT_SECRET=[JWT ì„œëª… í‚¤]
CORS_ORIGIN=https://aebonlee.github.io
```

#### Auto-Deploy ì„¤ì •
```yaml
Branch: main
Auto-Deploy: Yes
Health Check Path: /api/health
```

### Render ë°°í¬ ë¬¸ì œ í•´ê²°

#### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤
1. **Express ëª¨ë“ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŒ**
   ```
   Error: Cannot find module 'express'
   ```
   **í•´ê²°**: Root Directoryë¥¼ `backend`ë¡œ ì„¤ì •

2. **í¬íŠ¸ ì„¤ì • ì˜¤ë¥˜**
   ```
   Error: listen EADDRINUSE :::3000
   ```
   **í•´ê²°**: `process.env.PORT || 10000` ì‚¬ìš©

3. **ë¹Œë“œ ì‹¤íŒ¨**
   ```
   Error: npm ERR! missing script: build
   ```
   **í•´ê²°**: backend/package.jsonì— ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€

#### ìƒˆ ì„œë¹„ìŠ¤ ìƒì„± ê°€ì´ë“œ
ë¬¸ì œê°€ ì§€ì†ë  ê²½ìš° [render-setup.md](./render-setup.md) ì°¸ì¡°

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

#### PostgreSQL (Render ë‚´ì¥)
```env
DATABASE_URL=postgresql://username:password@hostname:5432/database
```

#### ì—°ê²° ì„¤ì •
```javascript
// backend/src/database/connection.js
const { Pool } = require('pg');

const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false
});
```

#### ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
# ë¡œì»¬ì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
cd backend
npm run migrate

# ë˜ëŠ” Render ì½˜ì†”ì—ì„œ
npm run migrate:prod
```

## ğŸ”„ CI/CD íŒŒì´í”„ë¼ì¸

### GitHub Actions ì›Œí¬í”Œë¡œìš°

#### 1. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (.github/workflows/ci.yml)
```yaml
name: CI
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '18'
      - run: npm ci
      - run: npm test -- --coverage --watchAll=false
      - run: npm run build:frontend
```

#### 2. ë°°í¬ ì›Œí¬í”Œë¡œìš° (.github/workflows/pages.yml)
- main ë¸Œëœì¹˜ push ì‹œ ìë™ ì‹¤í–‰
- ë¹Œë“œ â†’ í…ŒìŠ¤íŠ¸ â†’ GitHub Pages ë°°í¬

#### 3. ë°±ì—”ë“œ ë°°í¬ (Render ìë™)
- main ë¸Œëœì¹˜ push ì‹œ Renderì—ì„œ ìë™ ê°ì§€
- ìë™ ë¹Œë“œ â†’ ë°°í¬ â†’ í—¬ìŠ¤ì²´í¬

### ë°°í¬ ìƒíƒœ ëª¨ë‹ˆí„°ë§

#### GitHub Pages ìƒíƒœ
```bash
# ë°°í¬ ìƒíƒœ í™•ì¸
curl -I https://aebonlee.github.io/AHP_forPaper/

# ì‘ë‹µ ì˜ˆì‹œ
HTTP/2 200
content-type: text/html; charset=utf-8
```

#### Render ë°±ì—”ë“œ ìƒíƒœ  
```bash
# í—¬ìŠ¤ì²´í¬
curl https://ahp-forpaper.onrender.com/api/health

# ì‘ë‹µ ì˜ˆì‹œ
{
  "status": "ok",
  "timestamp": "2025-02-XX:XX:XX.XXX",
  "uptime": "XX hours"
}
```

## ğŸ” ë³´ì•ˆ ì„¤ì •

### HTTPS ê°•ì œ
```javascript
// í”„ë¡œë•ì…˜ì—ì„œ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸
if (process.env.NODE_ENV === 'production') {
  app.use((req, res, next) => {
    if (req.header('x-forwarded-proto') !== 'https') {
      res.redirect(`https://${req.header('host')}${req.url}`);
    } else {
      next();
    }
  });
}
```

### CORS ì„¤ì •
```javascript
const corsOptions = {
  origin: [
    'https://aebonlee.github.io',
    'http://localhost:3000'  // ê°œë°œìš©
  ],
  credentials: true,
  methods: ['GET', 'POST', 'PUT', 'DELETE'],
  allowedHeaders: ['Content-Type', 'Authorization', 'X-CSRF-Token']
};

app.use(cors(corsOptions));
```

### Content Security Policy
```javascript
app.use((req, res, next) => {
  res.setHeader('Content-Security-Policy', 
    "default-src 'self'; " +
    "script-src 'self' 'unsafe-inline'; " +
    "style-src 'self' 'unsafe-inline'; " +
    "connect-src 'self' https://ahp-forpaper.onrender.com"
  );
  next();
});
```

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”
```javascript
// ì½”ë“œ ë¶„í• 
const AdminDashboard = lazy(() => import('./components/admin/AdminDashboard'));

// ë²ˆë“¤ í¬ê¸° ë¶„ì„
npm run build
npx webpack-bundle-analyzer build/static/js/*.js
```

### ë°±ì—”ë“œ ìµœì í™”
```javascript
// ì••ì¶• ë¯¸ë“¤ì›¨ì–´
const compression = require('compression');
app.use(compression());

// ì •ì  íŒŒì¼ ìºì‹±
app.use(express.static('public', {
  maxAge: '1y',
  etag: false
}));
```

### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
```sql
-- ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_projects_user_id ON projects(user_id);
CREATE INDEX idx_evaluations_project_id ON evaluations(project_id);

-- ì—°ê²° í’€ ì„¤ì •
const pool = new Pool({
  max: 20,
  min: 5,
  acquireTimeoutMillis: 30000,
  idleTimeoutMillis: 30000
});
```

## ğŸš¨ ì¥ì•  ëŒ€ì‘

### ëª¨ë‹ˆí„°ë§ ë„êµ¬
1. **Render ëŒ€ì‹œë³´ë“œ**
   - CPU/Memory ì‚¬ìš©ëŸ‰
   - ì‘ë‹µ ì‹œê°„
   - ì˜¤ë¥˜ ë¡œê·¸

2. **GitHub Actions**
   - ë¹Œë“œ ì„±ê³µ/ì‹¤íŒ¨ ì•Œë¦¼
   - ë°°í¬ ìƒíƒœ ì¶”ì 

3. **ì™¸ë¶€ ëª¨ë‹ˆí„°ë§**
   - Uptime Robot (ì„ íƒì‚¬í•­)
   - StatusPage (ì„ íƒì‚¬í•­)

### ì¥ì•  ì‹œë‚˜ë¦¬ì˜¤ë³„ ëŒ€ì‘

#### 1. í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ì‹¤íŒ¨
```bash
# ë¡œì»¬ì—ì„œ ë¹Œë“œ í…ŒìŠ¤íŠ¸
npm run build:frontend

# ì˜¤ë¥˜ í™•ì¸ í›„ ìˆ˜ì •
npm run deploy  # ìˆ˜ë™ ë°°í¬
```

#### 2. ë°±ì—”ë“œ ì„œë²„ ë‹¤ìš´
```bash
# Render ì½˜ì†”ì—ì„œ ì¬ì‹œì‘
# ë˜ëŠ” ìƒˆ ì»¤ë°‹ìœ¼ë¡œ ì¬ë°°í¬ íŠ¸ë¦¬ê±°

# ë¡œê·¸ í™•ì¸
render logs --service=ahp-forpaper
```

#### 3. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
```bash
# ì—°ê²° ë¬¸ìì—´ í™•ì¸
echo $DATABASE_URL

# ìˆ˜ë™ ì—°ê²° í…ŒìŠ¤íŠ¸
psql $DATABASE_URL
```

## ğŸ”„ ë¡¤ë°± ì „ëµ

### í”„ë¡ íŠ¸ì—”ë“œ ë¡¤ë°±
```bash
# ì´ì „ ì»¤ë°‹ìœ¼ë¡œ ë¡¤ë°±
git revert <commit-hash>
git push origin main

# ë˜ëŠ” íŠ¹ì • ë¸Œëœì¹˜ì—ì„œ ë°°í¬
git checkout <stable-branch>
npm run deploy
```

### ë°±ì—”ë“œ ë¡¤ë°±
```bash
# Render ëŒ€ì‹œë³´ë“œì—ì„œ ì´ì „ ë°°í¬ ë²„ì „ ì„ íƒ
# ë˜ëŠ” ì•ˆì • ë²„ì „ ë¸Œëœì¹˜ë¡œ í‘¸ì‹œ
git push origin <stable-branch>:main --force
```

### ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…/ë³µêµ¬
```sql
-- ë°±ì—…
pg_dump $DATABASE_URL > backup.sql

-- ë³µêµ¬
psql $DATABASE_URL < backup.sql
```

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°°í¬ ì „ í™•ì¸ì‚¬í•­
- [ ] ë¡œì»¬ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ë¹Œë“œ ì˜¤ë¥˜ ì—†ìŒ
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì • í™•ì¸
- [ ] API ì—°ê²° í…ŒìŠ¤íŠ¸
- [ ] ë³´ì•ˆ ì„¤ì • ê²€í† 
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

### ë°°í¬ í›„ í™•ì¸ì‚¬í•­
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ì ‘ì† í™•ì¸
- [ ] ë°±ì—”ë“œ í—¬ìŠ¤ì²´í¬ í†µê³¼
- [ ] ë¡œê·¸ì¸/íšŒì›ê°€ì… ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] AHP ê³„ì‚° ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸ í™•ì¸
- [ ] CORS ì„¤ì • ë™ì‘ í™•ì¸

## ğŸ†˜ ê¸´ê¸‰ ì—°ë½ì²˜

### ì„œë¹„ìŠ¤ ë¬¸ì˜
- **GitHub Issues**: https://github.com/aebonlee/AHP_forPaper/issues
- **Render ì§€ì›**: https://render.com/docs/support

### ì°¸ê³  ë¬¸ì„œ
- [React ë°°í¬ ê°€ì´ë“œ](https://create-react-app.dev/docs/deployment/)
- [Render ë°°í¬ ë¬¸ì„œ](https://render.com/docs/web-services)
- [GitHub Pages ë¬¸ì„œ](https://docs.github.com/en/pages)

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025ë…„ 2ì›”  
**ì‘ì„±ì**: Claude Code Assistant  
**ê²€í†  ìƒíƒœ**: âœ… ë°°í¬ ì™„ë£Œ