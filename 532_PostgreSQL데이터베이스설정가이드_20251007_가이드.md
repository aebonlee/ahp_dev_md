# PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ê°€ì´ë“œ

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ë¡œì»¬ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • í…ŒìŠ¤íŠ¸
```bash
cd D:\ahp\ahp_django_service_updated
python setup_database.py
```

### 2. Render.com í™˜ê²½ë³€ìˆ˜ ì„¤ì •

Render.com ëŒ€ì‹œë³´ë“œì—ì„œ ë‹¤ìŒ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì„¸ìš”:

```
POSTGRES_DB=ahp_db
POSTGRES_USER=ahp_user
POSTGRES_PASSWORD=<secure_password>
POSTGRES_HOST=<render_postgres_host>
POSTGRES_PORT=5432

# ë˜ëŠ” DATABASE_URLë¡œ í•œ ë²ˆì— ì„¤ì •
DATABASE_URL=postgresql://ahp_user:<password>@<host>:5432/ahp_db
```

### 3. í”„ë¡œë•ì…˜ ë°°í¬ìš© build.sh ìˆ˜ì •
```bash
#!/usr/bin/env bash
# build.sh - Render.com ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸

# Python ì˜ì¡´ì„± ì„¤ì¹˜
pip install --upgrade pip
pip install -r requirements.txt

# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ë° ë§ˆì´ê·¸ë ˆì´ì…˜
python setup_database.py

# Static íŒŒì¼ ìˆ˜ì§‘ (í•„ìš” ì‹œ)
python manage.py collectstatic --noinput
```

## ğŸ“Š í…Œì´ë¸” êµ¬ì¡°

### 1. simple_projects (í”„ë¡œì íŠ¸)
- id: UUID (Primary Key)
- title: í”„ë¡œì íŠ¸ ì œëª©
- description: ì„¤ëª…
- objective: ëª©í‘œ
- owner_id: ì†Œìœ ì (Foreign Key)
- status: ìƒíƒœ (draft/active/completed)
- created_at: ìƒì„±ì¼
- updated_at: ìˆ˜ì •ì¼

### 2. evaluations_criteria (ê¸°ì¤€/ëŒ€ì•ˆ)
- id: UUID (Primary Key)
- project_id: í”„ë¡œì íŠ¸ (Foreign Key)
- name: ì´ë¦„
- description: ì„¤ëª…
- is_alternative: ëŒ€ì•ˆ ì—¬ë¶€
- weight: ê°€ì¤‘ì¹˜
- parent_id: ë¶€ëª¨ ê¸°ì¤€ (ê³„ì¸µêµ¬ì¡°)

### 3. evaluations_comparison (ìŒëŒ€ë¹„êµ)
- id: UUID (Primary Key)
- project_id: í”„ë¡œì íŠ¸ (Foreign Key)
- evaluator_id: í‰ê°€ì (Foreign Key)
- criteria_1_id: ë¹„êµ ê¸°ì¤€ 1
- criteria_2_id: ë¹„êµ ê¸°ì¤€ 2
- value: ë¹„êµê°’ (1-9 ìŠ¤ì¼€ì¼)
- created_at: í‰ê°€ì¼ì‹œ

### 4. evaluations_result (ê²°ê³¼)
- id: UUID (Primary Key)
- project_id: í”„ë¡œì íŠ¸ (Foreign Key)
- alternative_id: ëŒ€ì•ˆ (Foreign Key)
- final_weight: ìµœì¢… ê°€ì¤‘ì¹˜
- rank: ìˆœìœ„
- consistency_ratio: ì¼ê´€ì„± ë¹„ìœ¨

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ: "no such table: simple_projects" ì˜¤ë¥˜
**í•´ê²°ë°©ë²•:**
1. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰: `python manage.py migrate`
2. í…Œì´ë¸” ìƒì„± í™•ì¸: `python setup_database.py`

### ë¬¸ì œ: PostgreSQL ì—°ê²° ì‹¤íŒ¨
**í•´ê²°ë°©ë²•:**
1. í™˜ê²½ë³€ìˆ˜ í™•ì¸
2. ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸
3. SSL ì„¤ì • í™•ì¸ (sslmode=require)

### ë¬¸ì œ: ê¶Œí•œ ì˜¤ë¥˜
**í•´ê²°ë°©ë²•:**
1. ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ì ê¶Œí•œ í™•ì¸
2. CREATE, ALTER, DROP ê¶Œí•œ í•„ìš”

## ğŸ“ ê´€ë¦¬ ëª…ë ¹ì–´

### ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
```bash
python manage.py makemigrations
```

### ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš©
```bash
python manage.py migrate
```

### ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
```bash
python manage.py flush
```

### ê´€ë¦¬ì ê³„ì • ìƒì„±
```bash
python manage.py createsuperuser
```

## ğŸ”— ê´€ë ¨ íŒŒì¼
- `ahp_backend/settings.py` - ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
- `apps/projects/models.py` - í”„ë¡œì íŠ¸ ëª¨ë¸
- `apps/evaluations/models.py` - í‰ê°€ ëª¨ë¸
- `setup_database.py` - ìë™ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸