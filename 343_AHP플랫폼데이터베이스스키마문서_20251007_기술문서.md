# AHP í”Œë«í¼ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë¬¸ì„œ

## ğŸ“‹ ëª©ì°¨
1. [ë°ì´í„°ë² ì´ìŠ¤ ê°œìš”](#ë°ì´í„°ë² ì´ìŠ¤-ê°œìš”)
2. [E-R ë‹¤ì´ì–´ê·¸ë¨](#e-r-ë‹¤ì´ì–´ê·¸ë¨)
3. [í…Œì´ë¸” ìƒì„¸ êµ¬ì¡°](#í…Œì´ë¸”-ìƒì„¸-êµ¬ì¡°)
4. [í…Œì´ë¸” ê´€ê³„ë„](#í…Œì´ë¸”-ê´€ê³„ë„)

---

## ë°ì´í„°ë² ì´ìŠ¤ ê°œìš”

### ì‹œìŠ¤í…œ êµ¬ì„±
- **DBMS**: PostgreSQL (Render.com í˜¸ìŠ¤íŒ…)
- **ORM**: Django ORM
- **ì´ í…Œì´ë¸” ìˆ˜**: 28ê°œ
- **ì•± êµ¬ì„±**: 7ê°œ Django ì•± (accounts, projects, evaluations, analysis, common, workshops, exports)

### í•µì‹¬ ê¸°ëŠ¥
- **ì‚¬ìš©ì ê´€ë¦¬**: Custom User ëª¨ë¸ (AbstractUser í™•ì¥)
- **í”„ë¡œì íŠ¸ ê´€ë¦¬**: AHP í”„ë¡œì íŠ¸, ê³„ì¸µ êµ¬ì¡°, í…œí”Œë¦¿
- **í‰ê°€ ì‹œìŠ¤í…œ**: ìŒëŒ€ë¹„êµ, ì¼ê´€ì„± ê²€ì¦, í‰ê°€ì ì´ˆëŒ€
- **ë¶„ì„ ì—”ì§„**: ê°€ì¤‘ì¹˜ ê³„ì‚°, ë¯¼ê°ë„ ë¶„ì„, í•©ì˜ë„ ë¶„ì„
- **ì›Œí¬ìƒµ**: ì‹¤ì‹œê°„ ë‹¤ì¤‘ í‰ê°€ì ì„¸ì…˜
- **ë¦¬í¬íŒ…**: ë‹¤ì–‘í•œ í˜•ì‹ì˜ ë³´ê³ ì„œ ìƒì„±

---

## E-R ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           AHP Platform ERD                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      USERS       â”‚ (accounts.User)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id            â”‚
â”‚    username      â”‚â”€â”€â”€â”
â”‚    email         â”‚   â”‚
â”‚    full_name     â”‚   â”‚ owns
â”‚    organization  â”‚   â”‚
â”‚    role          â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    is_evaluator  â”‚   â”‚                      â”‚
â”‚    created_at    â”‚   â”‚                      â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚    PROJECTS      â”‚ (projects.Project)
        â”‚ 1:1          â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â–¼              â”‚              â”‚ PK id (UUID)     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚ FK owner_id      â”‚â—„â”€â”€â”€â”€â”€â”€â”
â”‚  USER_PROFILES   â”‚   â”‚              â”‚    title         â”‚       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚              â”‚    description   â”‚       â”‚
â”‚ PK id            â”‚   â”‚              â”‚    status        â”‚       â”‚ has
â”‚ FK user_id       â”‚   â”‚              â”‚    visibility    â”‚       â”‚
â”‚    avatar        â”‚   â”‚              â”‚    created_at    â”‚       â”‚
â”‚    bio           â”‚   â”‚              â”‚    deadline      â”‚       â”‚
â”‚    expertise     â”‚   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                      â”‚                  â”‚
                       â”‚                      â”‚ 1:N              â”‚
                       â”‚                      â–¼                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ PROJECT_MEMBERS  â”‚   â”‚              â”‚     CRITERIA     â”‚       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚ PK id            â”‚   â”‚              â”‚ PK id            â”‚       â”‚
â”‚ FK project_id    â”‚â—„â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ FK project_id    â”‚       â”‚
â”‚ FK user_id       â”‚â—„â”€â”€â”˜              â”‚ FK parent_id     â”‚â”€â”€â”    â”‚
â”‚    role          â”‚                  â”‚    name          â”‚  â”‚    â”‚
â”‚    can_edit      â”‚                  â”‚    type          â”‚  â”‚    â”‚
â”‚    joined_at     â”‚                  â”‚    level         â”‚  â”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚    order         â”‚  â”‚    â”‚
                                      â”‚    weight        â”‚  â”‚    â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
                                              â”‚             â”‚    â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                                                 self-ref        â”‚
                                                 (hierarchy)     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       EVALUATION SYSTEM                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EVALUATIONS    â”‚         â”‚ EVALUATION_INVITATIONSâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id (UUID)     â”‚         â”‚ PK id                 â”‚
â”‚ FK project_id    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤ FK project_id         â”‚
â”‚ FK evaluator_id  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤ FK evaluator_id       â”‚
â”‚    status        â”‚         â”‚ FK invited_by_id      â”‚
â”‚    progress      â”‚         â”‚    token (UUID)       â”‚
â”‚    started_at    â”‚         â”‚    status             â”‚
â”‚    completed_at  â”‚         â”‚    sent_at            â”‚
â”‚    consistency_  â”‚         â”‚    expires_at         â”‚
â”‚      ratio       â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 1:N
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PAIRWISE_COMPARISONS    â”‚        â”‚  DEMOGRAPHIC_SURVEYS â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id                    â”‚        â”‚ PK id (UUID)         â”‚
â”‚ FK evaluation_id         â”‚        â”‚ FK evaluator_id      â”‚
â”‚ FK criteria_a_id         â”‚        â”‚ FK project_id        â”‚
â”‚ FK criteria_b_id         â”‚        â”‚    age               â”‚
â”‚    value (1/9 ~ 9)       â”‚        â”‚    gender            â”‚
â”‚    comment               â”‚        â”‚    education         â”‚
â”‚    confidence            â”‚        â”‚    experience        â”‚
â”‚    time_spent            â”‚        â”‚    decision_role     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚    is_completed      â”‚
        â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1:N
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EVALUATION_SESSIONS    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id                    â”‚
â”‚ FK evaluation_id         â”‚
â”‚    started_at            â”‚
â”‚    ended_at              â”‚
â”‚    page_views (JSON)     â”‚
â”‚    interactions (JSON)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ANALYSIS SYSTEM                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ANALYSIS_RESULTS   â”‚        â”‚    WEIGHT_VECTORS    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id (UUID)         â”‚        â”‚ PK id                â”‚
â”‚ FK project_id        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”¤ FK project_id        â”‚
â”‚ FK created_by_id     â”‚        â”‚ FK criteria_id       â”‚
â”‚    type              â”‚        â”‚ FK evaluation_id     â”‚
â”‚    status            â”‚        â”‚    weight            â”‚
â”‚    results (JSON)    â”‚        â”‚    normalized_weight â”‚
â”‚    parameters (JSON) â”‚        â”‚    rank              â”‚
â”‚    created_at        â”‚        â”‚    method            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONSENSUS_METRICS   â”‚        â”‚ SENSITIVITY_ANALYSIS â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id                â”‚        â”‚ PK id                â”‚
â”‚ FK project_id        â”‚        â”‚ FK project_id        â”‚
â”‚    kendall_w         â”‚        â”‚ FK criteria_id       â”‚
â”‚    spearman_rho      â”‚        â”‚    perturbation_rangeâ”‚
â”‚    consensus_index   â”‚        â”‚    sensitivity_coeff â”‚
â”‚    consensus_level   â”‚        â”‚    rank_reversals    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚    chart_data (JSON) â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   COMPARISON_MATRICES    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id                    â”‚
â”‚ FK evaluation_id         â”‚
â”‚ FK parent_criteria_id    â”‚
â”‚    matrix_data (JSON)    â”‚
â”‚    consistency_ratio     â”‚
â”‚    eigenvalue_max        â”‚
â”‚    priority_vector       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       WORKSHOP SYSTEM                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WORKSHOP_SESSIONS   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id (UUID)         â”‚
â”‚ FK project_id        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FK facilitator_id    â”‚           â”‚
â”‚    title             â”‚           â”‚ for
â”‚    workshop_code     â”‚           â”‚
â”‚    scheduled_at      â”‚           â”‚
â”‚    status            â”‚           â”‚
â”‚    max_participants  â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
        â”‚                          â”‚
        â”‚ 1:N                      â”‚
        â–¼                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  WORKSHOP_PARTICIPANTS   â”‚       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚ PK id                    â”‚       â”‚
â”‚ FK workshop_id           â”‚â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ FK user_id               â”‚
â”‚    email                 â”‚
â”‚    name                  â”‚
â”‚    role                  â”‚
â”‚    status                â”‚
â”‚    completion_rate       â”‚
â”‚    access_token (UUID)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 1:1
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   REALTIME_PROGRESS      â”‚       â”‚ GROUP_CONSENSUS_RESULTS  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id                    â”‚       â”‚ PK id                    â”‚
â”‚ FK workshop_id           â”‚       â”‚ FK workshop_id (1:1)     â”‚
â”‚ FK participant_id        â”‚       â”‚    kendalls_w            â”‚
â”‚    current_comparison    â”‚       â”‚    consensus_indicator   â”‚
â”‚    comparisons_completed â”‚       â”‚    aggregated_weights    â”‚
â”‚    is_active             â”‚       â”‚    outlier_participants  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SURVEY_TEMPLATES   â”‚        â”‚   SURVEY_RESPONSES   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id                â”‚        â”‚ PK id                â”‚
â”‚ FK created_by_id     â”‚        â”‚ FK workshop_id       â”‚
â”‚    name              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”¤ FK participant_id    â”‚
â”‚    type              â”‚        â”‚ FK template_id       â”‚
â”‚    questions (JSON)  â”‚        â”‚    responses (JSON)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       COMMON SYSTEM                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ACTIVITY_LOGS     â”‚        â”‚  SYSTEM_SETTINGS     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id                â”‚        â”‚ PK id                â”‚
â”‚ FK user_id           â”‚        â”‚    key (unique)      â”‚
â”‚    action            â”‚        â”‚    value             â”‚
â”‚    message           â”‚        â”‚    value_type        â”‚
â”‚    ip_address        â”‚        â”‚    category          â”‚
â”‚    timestamp         â”‚        â”‚    is_public         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    NOTIFICATIONS     â”‚        â”‚     FILE_UPLOADS     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id                â”‚        â”‚ PK id (UUID)         â”‚
â”‚ FK recipient_id      â”‚        â”‚ FK uploaded_by_id    â”‚
â”‚    title             â”‚        â”‚    original_name     â”‚
â”‚    message           â”‚        â”‚    file_path         â”‚
â”‚    type              â”‚        â”‚    file_size         â”‚
â”‚    is_read           â”‚        â”‚    mime_type         â”‚
â”‚    created_at        â”‚        â”‚    status            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      API_KEYS        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id (UUID)         â”‚
â”‚ FK user_id           â”‚
â”‚    name              â”‚
â”‚    key (unique)      â”‚
â”‚    permissions       â”‚
â”‚    rate_limit        â”‚
â”‚    is_active         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       EXPORT SYSTEM                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EXPORT_TEMPLATES   â”‚        â”‚   EXPORT_HISTORY     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id                â”‚        â”‚ PK id (UUID)         â”‚
â”‚ FK created_by_id     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”¤ FK project_id        â”‚
â”‚    name              â”‚        â”‚ FK template_id       â”‚
â”‚    format            â”‚        â”‚ FK exported_by_id    â”‚
â”‚    template_type     â”‚        â”‚    file_name         â”‚
â”‚    include_sections  â”‚        â”‚    file_path         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚    status            â”‚
                                â”‚    download_count    â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   REPORT_SCHEDULES   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK id                â”‚
â”‚ FK project_id        â”‚
â”‚ FK template_id       â”‚
â”‚ FK created_by_id     â”‚
â”‚    frequency         â”‚
â”‚    next_run          â”‚
â”‚    recipients (JSON) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í…Œì´ë¸” ìƒì„¸ êµ¬ì¡°

### 1. accounts ì•± (ì‚¬ìš©ì ê´€ë¦¬)

#### 1.1 users (ì‚¬ìš©ì)
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(150) UNIQUE NOT NULL,
    email VARCHAR(254) UNIQUE NOT NULL,
    password VARCHAR(128) NOT NULL,
    first_name VARCHAR(150),
    last_name VARCHAR(150),
    
    -- í”„ë¡œí•„ í•„ë“œ
    full_name VARCHAR(100),
    organization VARCHAR(200),
    department VARCHAR(100),
    position VARCHAR(100),
    phone VARCHAR(20),
    
    -- ì‹œìŠ¤í…œ í•„ë“œ
    is_evaluator BOOLEAN DEFAULT FALSE,
    is_project_manager BOOLEAN DEFAULT FALSE,
    is_staff BOOLEAN DEFAULT FALSE,
    is_superuser BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    last_activity TIMESTAMP WITH TIME ZONE,
    last_login TIMESTAMP WITH TIME ZONE,
    
    -- ì„¤ì •
    language VARCHAR(10) DEFAULT 'ko',
    timezone VARCHAR(50) DEFAULT 'Asia/Seoul'
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_organization ON users(organization);
CREATE INDEX idx_users_is_evaluator ON users(is_evaluator);
```

**ì£¼ìš” ê´€ê³„**:
- â†’ user_profiles (1:1)
- â†’ owned_projects (1:N)
- â†’ evaluations (1:N)
- â†’ project_members (M:N via ProjectMember)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- Custom User ëª¨ë¸ (Django AbstractUser í™•ì¥)
- ì—­í• : evaluator, project_manager, staff, superuser
- ë§ˆì§€ë§‰ í™œë™ ì‹œê°„ ì¶”ì 

---

#### 1.2 user_profiles (ì‚¬ìš©ì í”„ë¡œí•„)
```sql
CREATE TABLE user_profiles (
    id SERIAL PRIMARY KEY,
    user_id INTEGER UNIQUE NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- ë¯¸ë””ì–´
    avatar VARCHAR(100),  -- íŒŒì¼ ê²½ë¡œ
    bio TEXT,
    
    -- ì—°êµ¬ ì •ë³´
    expertise_areas JSONB DEFAULT '[]',
    research_interests TEXT,
    publications TEXT,
    
    -- ì•Œë¦¼ ì„¤ì •
    email_notifications BOOLEAN DEFAULT TRUE,
    project_updates BOOLEAN DEFAULT TRUE,
    evaluation_reminders BOOLEAN DEFAULT TRUE,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (1:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ì‚¬ìš©ì ì¶”ê°€ ì •ë³´ ì €ì¥
- ì•Œë¦¼ ì„¤ì • ê´€ë¦¬
- expertise_areasëŠ” JSON ë°°ì—´ë¡œ ë‹¤ì¤‘ ì „ë¬¸ ë¶„ì•¼ ì €ì¥

---

### 2. projects ì•± (í”„ë¡œì íŠ¸ ê´€ë¦¬)

#### 2.1 simple_projects (í”„ë¡œì íŠ¸)
```sql
CREATE TABLE simple_projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title VARCHAR(200) NOT NULL,
    description TEXT NOT NULL,
    objective TEXT,
    
    -- ì†Œìœ ì ë° í˜‘ë ¥ì
    owner_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- ìƒíƒœ
    status VARCHAR(20) DEFAULT 'draft',  -- draft, active, evaluation, completed, archived
    visibility VARCHAR(20) DEFAULT 'private',  -- private, team, public
    
    -- AHP ì„¤ì •
    consistency_ratio_threshold FLOAT DEFAULT 0.1,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    deadline TIMESTAMP WITH TIME ZONE,
    
    -- ë©”íƒ€ë°ì´í„°
    tags JSONB DEFAULT '[]',
    settings JSONB DEFAULT '{}'
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_projects_owner ON simple_projects(owner_id);
CREATE INDEX idx_projects_status ON simple_projects(status);
CREATE INDEX idx_projects_created_at ON simple_projects(created_at);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (owner) (N:1)
- â†’ project_members (1:N)
- â†’ criteria (1:N)
- â†’ evaluations (1:N)
- â†’ workshops (1:N)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- AHP ë¶„ì„ í”„ë¡œì íŠ¸ì˜ ë©”ì¸ ì—”í‹°í‹°
- UUID ê¸°ë°˜ ID (ë³´ì•ˆ ë° ë¶„ì‚° ì‹œìŠ¤í…œ ì§€ì›)
- consistency_ratio_threshold: ì¼ê´€ì„± ë¹„ìœ¨ ì„ê³„ê°’ (ê¸°ë³¸ 0.1)

---

#### 2.2 project_members (í”„ë¡œì íŠ¸ ë©¤ë²„)
```sql
CREATE TABLE project_members (
    id SERIAL PRIMARY KEY,
    project_id UUID NOT NULL REFERENCES simple_projects(id) ON DELETE CASCADE,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- ì—­í• 
    role VARCHAR(20) NOT NULL,  -- owner, manager, evaluator, viewer
    
    -- ê¶Œí•œ
    can_edit_structure BOOLEAN DEFAULT FALSE,
    can_manage_evaluators BOOLEAN DEFAULT FALSE,
    can_view_results BOOLEAN DEFAULT TRUE,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    joined_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    invited_by_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    
    CONSTRAINT unique_project_user UNIQUE (project_id, user_id)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_project_members_project ON project_members(project_id);
CREATE INDEX idx_project_members_user ON project_members(user_id);
```

**ì£¼ìš” ê´€ê³„**:
- â† simple_projects (N:1)
- â† users (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- í”„ë¡œì íŠ¸ì™€ ì‚¬ìš©ìì˜ M:N ê´€ê³„ ì¤‘ê°„ í…Œì´ë¸”
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)
- ì„¸ë¶„í™”ëœ ê¶Œí•œ ê´€ë¦¬

---

#### 2.3 criteria (í‰ê°€ê¸°ì¤€/ëŒ€ì•ˆ)
```sql
CREATE TABLE criteria (
    id SERIAL PRIMARY KEY,
    project_id UUID NOT NULL REFERENCES simple_projects(id) ON DELETE CASCADE,
    
    -- ê¸°ë³¸ ì •ë³´
    name VARCHAR(200) NOT NULL,
    description TEXT,
    type VARCHAR(20) NOT NULL,  -- criteria, alternative
    
    -- ê³„ì¸µ êµ¬ì¡°
    parent_id INTEGER REFERENCES criteria(id) ON DELETE CASCADE,
    order INTEGER DEFAULT 0,
    level INTEGER DEFAULT 0,
    
    -- ê°€ì¤‘ì¹˜
    weight FLOAT DEFAULT 0.0,
    is_active BOOLEAN DEFAULT TRUE,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    
    CONSTRAINT unique_project_criteria_name UNIQUE (project_id, name)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_criteria_project ON criteria(project_id);
CREATE INDEX idx_criteria_parent ON criteria(parent_id);
CREATE INDEX idx_criteria_level_order ON criteria(level, "order");
```

**ì£¼ìš” ê´€ê³„**:
- â† simple_projects (N:1)
- â† criteria (parent) (N:1, self-referencing)
- â†’ criteria (children) (1:N, self-referencing)
- â†’ pairwise_comparisons (1:N)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- AHP ê³„ì¸µ êµ¬ì¡°ì˜ ë…¸ë“œ
- ìê¸° ì°¸ì¡° ê´€ê³„ë¡œ ê³„ì¸µ í‘œí˜„
- level: ê³„ì¸µ ê¹Šì´ (0=ìµœìƒìœ„)
- order: ê°™ì€ level ë‚´ ì •ë ¬ ìˆœì„œ
- type: criteria(í‰ê°€ê¸°ì¤€) ë˜ëŠ” alternative(ëŒ€ì•ˆ)

---

#### 2.4 project_templates (í”„ë¡œì íŠ¸ í…œí”Œë¦¿)
```sql
CREATE TABLE project_templates (
    id SERIAL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    description TEXT NOT NULL,
    category VARCHAR(100),
    
    -- í…œí”Œë¦¿ ë°ì´í„°
    structure JSONB NOT NULL,  -- ê³„ì¸µ êµ¬ì¡° ì •ì˜
    default_settings JSONB DEFAULT '{}',
    
    -- ë©”íƒ€
    created_by_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    is_public BOOLEAN DEFAULT FALSE,
    usage_count INTEGER DEFAULT 0,
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- í”„ë¡œì íŠ¸ ìƒì„± ì‹œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í…œí”Œë¦¿
- structure: JSONìœ¼ë¡œ ê³„ì¸µ êµ¬ì¡° ì •ì˜
- usage_count: í…œí”Œë¦¿ ì‚¬ìš© íšŸìˆ˜ ì¶”ì 

---

### 3. evaluations ì•± (í‰ê°€ ì‹œìŠ¤í…œ)

#### 3.1 evaluations (í‰ê°€ ì„¸ì…˜)
```sql
CREATE TABLE evaluations (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID NOT NULL REFERENCES simple_projects(id) ON DELETE CASCADE,
    evaluator_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- í‰ê°€ ì •ë³´
    title VARCHAR(200),
    instructions TEXT,
    
    -- ìƒíƒœ
    status VARCHAR(20) DEFAULT 'pending',  -- pending, in_progress, completed, expired
    progress FLOAT DEFAULT 0.0 CHECK (progress >= 0 AND progress <= 100),
    
    -- íƒ€ì´ë°
    started_at TIMESTAMP WITH TIME ZONE,
    completed_at TIMESTAMP WITH TIME ZONE,
    expires_at TIMESTAMP WITH TIME ZONE,
    
    -- ê²°ê³¼
    consistency_ratio FLOAT,
    is_consistent BOOLEAN DEFAULT FALSE,
    
    -- ë©”íƒ€ë°ì´í„°
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    metadata JSONB DEFAULT '{}',
    
    CONSTRAINT unique_project_evaluator UNIQUE (project_id, evaluator_id)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_evaluations_project ON evaluations(project_id);
CREATE INDEX idx_evaluations_evaluator ON evaluations(evaluator_id);
CREATE INDEX idx_evaluations_status ON evaluations(status);
```

**ì£¼ìš” ê´€ê³„**:
- â† simple_projects (N:1)
- â† users (evaluator) (N:1)
- â†’ pairwise_comparisons (1:N)
- â†’ evaluation_sessions (1:N)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- í‰ê°€ìì˜ í‰ê°€ ì§„í–‰ ìƒíƒœ ì¶”ì 
- consistency_ratio: ì¼ê´€ì„± ë¹„ìœ¨ (CR < 0.1 ê¶Œì¥)
- progress: 0~100 ë²”ìœ„ì˜ ì§„í–‰ë¥ 

---

#### 3.2 pairwise_comparisons (ìŒëŒ€ë¹„êµ)
```sql
CREATE TABLE pairwise_comparisons (
    id SERIAL PRIMARY KEY,
    evaluation_id UUID NOT NULL REFERENCES evaluations(id) ON DELETE CASCADE,
    criteria_a_id INTEGER NOT NULL REFERENCES criteria(id) ON DELETE CASCADE,
    criteria_b_id INTEGER NOT NULL REFERENCES criteria(id) ON DELETE CASCADE,
    
    -- ë¹„êµ ê°’ (Saatyì˜ 1/9 ~ 9 ì²™ë„)
    value FLOAT NOT NULL CHECK (value >= 1.0/9.0 AND value <= 9.0),
    
    -- ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸
    comment TEXT,
    confidence INTEGER DEFAULT 5 CHECK (confidence >= 1 AND confidence <= 10),
    
    -- íƒ€ì´ë°
    answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    time_spent FLOAT DEFAULT 0.0,  -- ì´ˆ ë‹¨ìœ„
    
    CONSTRAINT unique_eval_criteria_pair UNIQUE (evaluation_id, criteria_a_id, criteria_b_id),
    CONSTRAINT check_different_criteria CHECK (criteria_a_id != criteria_b_id)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_pairwise_evaluation ON pairwise_comparisons(evaluation_id);
CREATE INDEX idx_pairwise_criteria_a ON pairwise_comparisons(criteria_a_id);
CREATE INDEX idx_pairwise_criteria_b ON pairwise_comparisons(criteria_b_id);
```

**ì£¼ìš” ê´€ê³„**:
- â† evaluations (N:1)
- â† criteria (criteria_a) (N:1)
- â† criteria (criteria_b) (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- AHP ìŒëŒ€ë¹„êµ ë°ì´í„° ì €ì¥
- Saaty ì²™ë„: 1/9, 1/8, ..., 1, ..., 8, 9
- value = 1: ë™ì¼ ì¤‘ìš”ë„
- value > 1: criteria_aê°€ ë” ì¤‘ìš”
- value < 1: criteria_bê°€ ë” ì¤‘ìš”
- confidence: í‰ê°€ìì˜ í™•ì‹ ë„ (1~10)

---

#### 3.3 evaluation_sessions (í‰ê°€ ì„¸ì…˜)
```sql
CREATE TABLE evaluation_sessions (
    id SERIAL PRIMARY KEY,
    evaluation_id UUID NOT NULL REFERENCES evaluations(id) ON DELETE CASCADE,
    
    -- ì„¸ì…˜ ì •ë³´
    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    ended_at TIMESTAMP WITH TIME ZONE,
    duration FLOAT DEFAULT 0.0,  -- ì´ˆ ë‹¨ìœ„
    
    -- ì‚¬ìš©ì í™œë™
    page_views JSONB DEFAULT '[]',
    interactions JSONB DEFAULT '[]',
    
    -- ë¸Œë¼ìš°ì €/ì¥ì¹˜ ì •ë³´
    user_agent TEXT,
    ip_address INET
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_evaluation_sessions_evaluation ON evaluation_sessions(evaluation_id);
CREATE INDEX idx_evaluation_sessions_started_at ON evaluation_sessions(started_at);
```

**ì£¼ìš” ê´€ê³„**:
- â† evaluations (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- í‰ê°€ ì„¸ì…˜ë³„ ì‚¬ìš©ì í™œë™ ì¶”ì 
- UX ë¶„ì„ ë° ì‚¬ìš©ì„± ê°œì„  ë°ì´í„°
- page_views, interactions: JSON ë°°ì—´ë¡œ ì´ë²¤íŠ¸ ë¡œê·¸ ì €ì¥

---

#### 3.4 evaluation_invitations (í‰ê°€ ì´ˆëŒ€)
```sql
CREATE TABLE evaluation_invitations (
    id SERIAL PRIMARY KEY,
    project_id UUID NOT NULL REFERENCES simple_projects(id) ON DELETE CASCADE,
    evaluator_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    invited_by_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- ì´ˆëŒ€ ìƒì„¸
    message TEXT,
    status VARCHAR(20) DEFAULT 'pending',  -- pending, accepted, declined, expired
    
    -- íƒ€ì´ë°
    sent_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    responded_at TIMESTAMP WITH TIME ZONE,
    expires_at TIMESTAMP WITH TIME ZONE,
    
    -- ë³´ì•ˆ í† í°
    token UUID UNIQUE DEFAULT gen_random_uuid(),
    
    CONSTRAINT unique_project_evaluator_invitation UNIQUE (project_id, evaluator_id)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_invitations_project ON evaluation_invitations(project_id);
CREATE INDEX idx_invitations_evaluator ON evaluation_invitations(evaluator_id);
CREATE INDEX idx_invitations_token ON evaluation_invitations(token);
```

**ì£¼ìš” ê´€ê³„**:
- â† simple_projects (N:1)
- â† users (evaluator) (N:1)
- â† users (invited_by) (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- í‰ê°€ì ì´ˆëŒ€ ê´€ë¦¬
- token: ì´ë©”ì¼ ë§í¬ë¥¼ í†µí•œ ì•ˆì „í•œ ì ‘ê·¼
- ì´ˆëŒ€ ìˆ˜ë½ ì‹œ evaluation ë ˆì½”ë“œ ìƒì„±

---

#### 3.5 demographic_surveys (ì¸êµ¬í†µê³„ ì„¤ë¬¸)
```sql
CREATE TABLE demographic_surveys (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    evaluator_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    project_id UUID REFERENCES simple_projects(id) ON DELETE CASCADE,
    
    -- ì¸êµ¬í†µê³„ ì •ë³´
    age VARCHAR(10),  -- 20s, 30s, 40s, 50s, 60s
    gender VARCHAR(15),  -- male, female, other, prefer-not
    education VARCHAR(20),  -- high-school, bachelor, master, phd, other
    occupation VARCHAR(100),
    
    -- ì „ë¬¸ ì •ë³´
    experience VARCHAR(10),  -- less-1, 1-3, 3-5, 5-10, more-10
    department VARCHAR(100),
    position VARCHAR(100),
    project_experience VARCHAR(10),  -- none, 1-2, 3-5, more-5
    
    -- ì˜ì‚¬ê²°ì • ì—­í• 
    decision_role VARCHAR(20),  -- decision-maker, advisor, analyst, evaluator, observer
    additional_info TEXT,
    
    -- ë©”íƒ€ë°ì´í„°
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    is_completed BOOLEAN DEFAULT FALSE,
    completion_timestamp TIMESTAMP WITH TIME ZONE,
    
    CONSTRAINT unique_evaluator_project_survey UNIQUE (evaluator_id, project_id)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_demographic_evaluator ON demographic_surveys(evaluator_id);
CREATE INDEX idx_demographic_project ON demographic_surveys(project_id);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (evaluator) (N:1)
- â† simple_projects (N:1, optional)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- í‰ê°€ì ë°°ê²½ ì •ë³´ ìˆ˜ì§‘
- ë¶„ì„ ì‹œ ê·¸ë£¹ë³„ ë¹„êµì— ì‚¬ìš©
- project_id NULL ê°€ëŠ¥ (ì¼ë°˜ ì„¤ë¬¸)

---

### 4. analysis ì•± (ë¶„ì„ ì—”ì§„)

#### 4.1 analysis_results (ë¶„ì„ ê²°ê³¼)
```sql
CREATE TABLE analysis_results (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID NOT NULL REFERENCES simple_projects(id) ON DELETE CASCADE,
    created_by_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- ë¶„ì„ íƒ€ì…
    type VARCHAR(20) NOT NULL,  -- individual, group, sensitivity, consensus
    title VARCHAR(200) NOT NULL,
    description TEXT,
    
    -- íŒŒë¼ë¯¸í„° ë° ê²°ê³¼
    parameters JSONB DEFAULT '{}',
    results JSONB DEFAULT '{}',
    summary TEXT,
    
    -- ìƒíƒœ
    status VARCHAR(20) DEFAULT 'processing',  -- processing, completed, failed
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    completed_at TIMESTAMP WITH TIME ZONE
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_analysis_results_project ON analysis_results(project_id);
CREATE INDEX idx_analysis_results_type ON analysis_results(type);
```

**ì£¼ìš” ê´€ê³„**:
- â† simple_projects (N:1)
- â† users (created_by) (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ë‹¤ì–‘í•œ ë¶„ì„ ìœ í˜•ì˜ ê²°ê³¼ ì €ì¥
- parameters, results: JSONìœ¼ë¡œ ìœ ì—°í•œ ë°ì´í„° êµ¬ì¡°

---

#### 4.2 weight_vectors (ê°€ì¤‘ì¹˜ ë²¡í„°)
```sql
CREATE TABLE weight_vectors (
    id SERIAL PRIMARY KEY,
    project_id UUID NOT NULL REFERENCES simple_projects(id) ON DELETE CASCADE,
    criteria_id INTEGER NOT NULL REFERENCES criteria(id) ON DELETE CASCADE,
    evaluation_id UUID REFERENCES evaluations(id) ON DELETE CASCADE,
    
    -- ê°€ì¤‘ì¹˜ ë°ì´í„°
    weight FLOAT NOT NULL,
    normalized_weight FLOAT NOT NULL,
    rank INTEGER NOT NULL,
    
    -- ê³„ì‚° ë°©ë²•
    method VARCHAR(50) DEFAULT 'eigenvector',  -- eigenvector, geometric_mean
    
    -- ë©”íƒ€ë°ì´í„°
    calculated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    is_final BOOLEAN DEFAULT FALSE
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_weight_vectors_project ON weight_vectors(project_id);
CREATE INDEX idx_weight_vectors_criteria ON weight_vectors(criteria_id);
CREATE INDEX idx_weight_vectors_rank ON weight_vectors(rank);
```

**ì£¼ìš” ê´€ê³„**:
- â† simple_projects (N:1)
- â† criteria (N:1)
- â† evaluations (N:1, optional)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ê³„ì‚°ëœ ê°€ì¤‘ì¹˜ ì €ì¥
- evaluation_id NULL: ê·¸ë£¹ í†µí•© ê°€ì¤‘ì¹˜
- evaluation_id ìˆìŒ: ê°œë³„ í‰ê°€ì ê°€ì¤‘ì¹˜

---

#### 4.3 consensus_metrics (í•©ì˜ë„ ì§€í‘œ)
```sql
CREATE TABLE consensus_metrics (
    id SERIAL PRIMARY KEY,
    project_id UUID NOT NULL REFERENCES simple_projects(id) ON DELETE CASCADE,
    
    -- í•©ì˜ë„ ì¸¡ì •ê°’
    kendall_w FLOAT,  -- Kendall's W coefficient (0~1)
    spearman_rho FLOAT,  -- Average Spearman's rho
    consensus_index FLOAT,
    
    -- ê·¸ë£¹ í†µê³„
    total_evaluators INTEGER NOT NULL,
    completed_evaluations INTEGER NOT NULL,
    average_consistency FLOAT,
    
    -- ë¶ˆì¼ì¹˜ ë¶„ì„
    high_disagreement_criteria JSONB DEFAULT '[]',
    outlier_evaluators JSONB DEFAULT '[]',
    
    -- ê²°ê³¼
    consensus_level VARCHAR(20),  -- high, medium, low
    
    calculated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_consensus_metrics_project ON consensus_metrics(project_id);
```

**ì£¼ìš” ê´€ê³„**:
- â† simple_projects (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ê·¸ë£¹ í‰ê°€ì˜ í•©ì˜ ì •ë„ ì¸¡ì •
- kendall_w: í‰ê°€ì ê°„ ìˆœìœ„ ì¼ì¹˜ë„
- outlier_evaluators: ë‹¤ìˆ˜ ì˜ê²¬ê³¼ ë‹¤ë¥¸ í‰ê°€ì ì‹ë³„

---

#### 4.4 sensitivity_analyses (ë¯¼ê°ë„ ë¶„ì„)
```sql
CREATE TABLE sensitivity_analyses (
    id SERIAL PRIMARY KEY,
    project_id UUID NOT NULL REFERENCES simple_projects(id) ON DELETE CASCADE,
    criteria_id INTEGER NOT NULL REFERENCES criteria(id) ON DELETE CASCADE,
    
    -- ë¶„ì„ íŒŒë¼ë¯¸í„°
    perturbation_range FLOAT DEFAULT 0.1,  -- Â±10%
    steps INTEGER DEFAULT 20,
    
    -- ê²°ê³¼
    sensitivity_coefficient FLOAT NOT NULL,
    rank_reversals JSONB DEFAULT '[]',
    critical_values JSONB DEFAULT '{}',
    
    -- ì‹œê°í™” ë°ì´í„°
    chart_data JSONB DEFAULT '{}',
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_sensitivity_project ON sensitivity_analyses(project_id);
CREATE INDEX idx_sensitivity_criteria ON sensitivity_analyses(criteria_id);
```

**ì£¼ìš” ê´€ê³„**:
- â† simple_projects (N:1)
- â† criteria (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ê°€ì¤‘ì¹˜ ë³€í™”ì— ë”°ë¥¸ ê²°ê³¼ ë¯¼ê°ë„ ë¶„ì„
- rank_reversals: ìˆœìœ„ ì—­ì „ì´ ë°œìƒí•˜ëŠ” ì„ê³„ê°’
- perturbation_range: ê°€ì¤‘ì¹˜ ë³€ë™ ë²”ìœ„

---

#### 4.5 comparison_matrices (ë¹„êµ í–‰ë ¬)
```sql
CREATE TABLE comparison_matrices (
    id SERIAL PRIMARY KEY,
    evaluation_id UUID NOT NULL REFERENCES evaluations(id) ON DELETE CASCADE,
    parent_criteria_id INTEGER REFERENCES criteria(id) ON DELETE CASCADE,
    
    -- í–‰ë ¬ ë°ì´í„°
    matrix_data JSONB NOT NULL,  -- 2D array
    criteria_order JSONB NOT NULL,  -- Criteria ID order
    
    -- í–‰ë ¬ ì†ì„±
    dimension INTEGER NOT NULL,
    consistency_ratio FLOAT NOT NULL,
    eigenvalue_max FLOAT NOT NULL,
    
    -- ë„ì¶œëœ ê°€ì¤‘ì¹˜
    priority_vector JSONB NOT NULL,
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_comparison_matrices_evaluation ON comparison_matrices(evaluation_id);
```

**ì£¼ìš” ê´€ê³„**:
- â† evaluations (N:1)
- â† criteria (parent) (N:1, optional)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ìŒëŒ€ë¹„êµ í–‰ë ¬ ì €ì¥ ë° ê³„ì‚° ê²°ê³¼
- parent_criteria_id NULL: ìµœìƒìœ„ ê¸°ì¤€ ë¹„êµ
- ê³ ìœ ë²¡í„°ë²•ìœ¼ë¡œ priority_vector ê³„ì‚°

---

#### 4.6 report_templates (ë³´ê³ ì„œ í…œí”Œë¦¿)
```sql
CREATE TABLE report_templates (
    id SERIAL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    description TEXT NOT NULL,
    
    -- í…œí”Œë¦¿ ì„¤ì •
    template_type VARCHAR(50) NOT NULL,  -- executive_summary, detailed_analysis, etc.
    template_content JSONB NOT NULL,
    
    -- ì„¤ì •
    is_default BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE,
    
    created_by_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ë¶„ì„ ë³´ê³ ì„œ ìƒì„± í…œí”Œë¦¿
- template_content: ì„¹ì…˜, ì°¨íŠ¸, í‘œ êµ¬ì„± ì •ì˜

---

### 5. workshops ì•± (ì›Œí¬ìƒµ ì‹œìŠ¤í…œ)

#### 5.1 workshop_sessions (ì›Œí¬ìƒµ ì„¸ì…˜)
```sql
CREATE TABLE workshop_sessions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID NOT NULL REFERENCES simple_projects(id) ON DELETE CASCADE,
    facilitator_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- ì›Œí¬ìƒµ ì •ë³´
    title VARCHAR(200) NOT NULL,
    description TEXT NOT NULL,
    workshop_code VARCHAR(10) UNIQUE NOT NULL,
    max_participants INTEGER DEFAULT 30,
    
    -- íƒ€ì´ë°
    scheduled_at TIMESTAMP WITH TIME ZONE NOT NULL,
    started_at TIMESTAMP WITH TIME ZONE,
    ended_at TIMESTAMP WITH TIME ZONE,
    duration_minutes INTEGER DEFAULT 120,
    
    -- ìƒíƒœ
    status VARCHAR(20) DEFAULT 'preparation',  -- preparation, in_progress, analyzing, completed, cancelled
    is_anonymous BOOLEAN DEFAULT FALSE,
    allow_late_join BOOLEAN DEFAULT TRUE,
    
    -- ê²°ê³¼
    consensus_method VARCHAR(50) DEFAULT 'geometric_mean',
    consensus_achieved BOOLEAN DEFAULT FALSE,
    
    -- ë¬¸ì„œí™”
    meeting_minutes TEXT,
    recording_url VARCHAR(200),
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_workshop_sessions_project ON workshop_sessions(project_id);
CREATE INDEX idx_workshop_sessions_facilitator ON workshop_sessions(facilitator_id);
CREATE INDEX idx_workshop_sessions_code ON workshop_sessions(workshop_code);
```

**ì£¼ìš” ê´€ê³„**:
- â† simple_projects (N:1)
- â† users (facilitator) (N:1)
- â†’ workshop_participants (1:N)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ì‹¤ì‹œê°„ ë‹¤ì¤‘ í‰ê°€ì ì„¸ì…˜
- workshop_code: ì°¸ê°€ì ì ‘ì†ìš© 6ìë¦¬ ì½”ë“œ
- is_anonymous: ìµëª… í‰ê°€ ì—¬ë¶€

---

#### 5.2 workshop_participants (ì›Œí¬ìƒµ ì°¸ê°€ì)
```sql
CREATE TABLE workshop_participants (
    id SERIAL PRIMARY KEY,
    workshop_id UUID NOT NULL REFERENCES workshop_sessions(id) ON DELETE CASCADE,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    
    -- ì°¸ê°€ì ì •ë³´
    email VARCHAR(254) NOT NULL,
    name VARCHAR(100) NOT NULL,
    organization VARCHAR(200),
    department VARCHAR(100),
    
    -- ì—­í• 
    role VARCHAR(20) DEFAULT 'evaluator',  -- evaluator, observer, facilitator
    
    -- ìƒíƒœ
    status VARCHAR(20) DEFAULT 'invited',  -- invited, registered, active, completed, absent
    joined_at TIMESTAMP WITH TIME ZONE,
    left_at TIMESTAMP WITH TIME ZONE,
    
    -- ì§„í–‰ ìƒí™©
    completion_rate FLOAT DEFAULT 0.0,
    last_activity TIMESTAMP WITH TIME ZONE,
    
    -- ì ‘ê·¼ ì œì–´
    access_token UUID UNIQUE DEFAULT gen_random_uuid(),
    invitation_sent_at TIMESTAMP WITH TIME ZONE,
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    
    CONSTRAINT unique_workshop_email UNIQUE (workshop_id, email)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_workshop_participants_workshop ON workshop_participants(workshop_id);
CREATE INDEX idx_workshop_participants_user ON workshop_participants(user_id);
CREATE INDEX idx_workshop_participants_token ON workshop_participants(access_token);
```

**ì£¼ìš” ê´€ê³„**:
- â† workshop_sessions (N:1)
- â† users (N:1, optional)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ì›Œí¬ìƒµ ì°¸ê°€ì ê´€ë¦¬
- user_id NULL ê°€ëŠ¥ (ë¹„íšŒì› ì°¸ê°€)
- access_token: ì›Œí¬ìƒµ ì ‘ì† ì¸ì¦

---

#### 5.3 realtime_progress (ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™©)
```sql
CREATE TABLE realtime_progress (
    id SERIAL PRIMARY KEY,
    workshop_id UUID NOT NULL REFERENCES workshop_sessions(id) ON DELETE CASCADE,
    participant_id INTEGER NOT NULL REFERENCES workshop_participants(id) ON DELETE CASCADE,
    
    -- ì§„í–‰ ìƒí™©
    current_comparison VARCHAR(200),
    comparisons_completed INTEGER DEFAULT 0,
    total_comparisons INTEGER NOT NULL,
    
    -- íƒ€ì´ë°
    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    last_updated TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    estimated_completion TIMESTAMP WITH TIME ZONE,
    
    -- ìƒíƒœ
    is_active BOOLEAN DEFAULT TRUE,
    is_stuck BOOLEAN DEFAULT FALSE,
    
    CONSTRAINT unique_workshop_participant_progress UNIQUE (workshop_id, participant_id)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_realtime_progress_workshop ON realtime_progress(workshop_id);
```

**ì£¼ìš” ê´€ê³„**:
- â† workshop_sessions (N:1)
- â† workshop_participants (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ì‹¤ì‹œê°„ ì§„í–‰ ëª¨ë‹ˆí„°ë§
- is_stuck: ì¼ì • ì‹œê°„ ì§„í–‰ ì—†ì„ ì‹œ í‘œì‹œ
- WebSocket/SSEë¡œ ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸

---

#### 5.4 group_consensus_results (ê·¸ë£¹ í•©ì˜ ê²°ê³¼)
```sql
CREATE TABLE group_consensus_results (
    id SERIAL PRIMARY KEY,
    workshop_id UUID UNIQUE NOT NULL REFERENCES workshop_sessions(id) ON DELETE CASCADE,
    
    -- í•©ì˜ë„ ì¸¡ì •
    kendalls_w FLOAT,
    consensus_indicator FLOAT,
    disagreement_index FLOAT,
    
    -- í†µí•© ê°€ì¤‘ì¹˜
    aggregated_weights JSONB NOT NULL,
    individual_weights JSONB NOT NULL,
    
    -- í†µê³„ ë¶„ì„
    mean_weights JSONB NOT NULL,
    std_deviation JSONB NOT NULL,
    confidence_intervals JSONB NOT NULL,
    
    -- ì´ìƒì¹˜ ë¶„ì„
    outlier_participants JSONB DEFAULT '[]',
    consensus_clusters JSONB DEFAULT '{}',
    
    calculated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**ì£¼ìš” ê´€ê³„**:
- â† workshop_sessions (1:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ì›Œí¬ìƒµ ì¢…ë£Œ í›„ ê·¸ë£¹ í•©ì˜ ë¶„ì„
- aggregated_weights: ê¸°í•˜í‰ê·  ë“±ìœ¼ë¡œ í†µí•©ëœ ê°€ì¤‘ì¹˜
- consensus_clusters: ìœ ì‚¬í•œ ì˜ê²¬ ê·¸ë£¹ ì‹ë³„

---

#### 5.5 survey_templates (ì„¤ë¬¸ í…œí”Œë¦¿)
```sql
CREATE TABLE survey_templates (
    id SERIAL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    description TEXT NOT NULL,
    type VARCHAR(20) NOT NULL,  -- demographic, pre_evaluation, post_evaluation, custom
    
    -- ì„¤ë¬¸ êµ¬ì¡°
    questions JSONB NOT NULL,
    settings JSONB DEFAULT '{}',
    
    -- ì‚¬ìš© í˜„í™©
    is_active BOOLEAN DEFAULT TRUE,
    usage_count INTEGER DEFAULT 0,
    
    created_by_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ì›Œí¬ìƒµ ì‚¬ì „/ì‚¬í›„ ì„¤ë¬¸ í…œí”Œë¦¿
- questions: JSON ë°°ì—´ë¡œ ì§ˆë¬¸ ì •ì˜

---

#### 5.6 survey_responses (ì„¤ë¬¸ ì‘ë‹µ)
```sql
CREATE TABLE survey_responses (
    id SERIAL PRIMARY KEY,
    workshop_id UUID NOT NULL REFERENCES workshop_sessions(id) ON DELETE CASCADE,
    participant_id INTEGER NOT NULL REFERENCES workshop_participants(id) ON DELETE CASCADE,
    template_id INTEGER NOT NULL REFERENCES survey_templates(id) ON DELETE CASCADE,
    
    -- ì‘ë‹µ ë°ì´í„°
    responses JSONB NOT NULL,
    
    -- ë©”íƒ€ë°ì´í„°
    submitted_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    ip_address INET,
    user_agent TEXT,
    
    CONSTRAINT unique_workshop_participant_template UNIQUE (workshop_id, participant_id, template_id)
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_survey_responses_workshop ON survey_responses(workshop_id);
CREATE INDEX idx_survey_responses_template ON survey_responses(template_id);
```

**ì£¼ìš” ê´€ê³„**:
- â† workshop_sessions (N:1)
- â† workshop_participants (N:1)
- â† survey_templates (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ì°¸ê°€ìë³„ ì„¤ë¬¸ ì‘ë‹µ ì €ì¥
- responses: JSONìœ¼ë¡œ ì§ˆë¬¸ë³„ ë‹µë³€ ì €ì¥

---

### 6. common ì•± (ê³µí†µ ì‹œìŠ¤í…œ)

#### 6.1 activity_logs (í™œë™ ë¡œê·¸)
```sql
CREATE TABLE activity_logs (
    id BIGSERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,
    
    -- í™œë™ ì •ë³´
    action VARCHAR(20) NOT NULL,  -- create, update, delete, view, export, import, login, logout
    level VARCHAR(10) DEFAULT 'info',  -- info, warning, error, debug
    
    -- ëŒ€ìƒ ê°ì²´ (Generic Foreign Key)
    content_type_id INTEGER REFERENCES django_content_type(id) ON DELETE CASCADE,
    object_id VARCHAR(255),
    
    -- ìƒì„¸ ì •ë³´
    message TEXT NOT NULL,
    details JSONB DEFAULT '{}',
    
    -- ìš”ì²­ ì»¨í…ìŠ¤íŠ¸
    ip_address INET,
    user_agent TEXT,
    request_path VARCHAR(500),
    
    timestamp TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_activity_logs_user_timestamp ON activity_logs(user_id, timestamp);
CREATE INDEX idx_activity_logs_action_timestamp ON activity_logs(action, timestamp);
CREATE INDEX idx_activity_logs_timestamp ON activity_logs(timestamp);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (N:1, optional)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ì‹œìŠ¤í…œ ì „ì²´ í™œë™ ì¶”ì 
- ê°ì‚¬(Audit) ë° ë³´ì•ˆ ëª¨ë‹ˆí„°ë§
- details: JSONìœ¼ë¡œ ì¶”ê°€ ë©”íƒ€ë°ì´í„° ì €ì¥

---

#### 6.2 system_settings (ì‹œìŠ¤í…œ ì„¤ì •)
```sql
CREATE TABLE system_settings (
    id SERIAL PRIMARY KEY,
    key VARCHAR(100) UNIQUE NOT NULL,
    category VARCHAR(20) NOT NULL,  -- general, security, email, analytics, ui
    
    -- ê°’ ë° íƒ€ì…
    value TEXT NOT NULL,
    value_type VARCHAR(10) DEFAULT 'string',  -- string, integer, float, boolean, json
    
    -- ë©”íƒ€ë°ì´í„°
    name VARCHAR(200) NOT NULL,
    description TEXT,
    is_public BOOLEAN DEFAULT FALSE,
    is_editable BOOLEAN DEFAULT TRUE,
    
    -- ê²€ì¦
    validation_rules JSONB DEFAULT '{}',
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_by_id INTEGER REFERENCES users(id) ON DELETE SET NULL
);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (updated_by) (N:1, optional)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ì‹œìŠ¤í…œ ì „ì—­ ì„¤ì • ê´€ë¦¬
- íƒ€ì… ê¸°ë°˜ ê°’ ë³€í™˜ (get_typed_value ë©”ì„œë“œ)
- validation_rules: JSONìœ¼ë¡œ ê²€ì¦ ê·œì¹™ ì •ì˜

---

#### 6.3 file_uploads (íŒŒì¼ ì—…ë¡œë“œ)
```sql
CREATE TABLE file_uploads (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    uploaded_by_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- íŒŒì¼ ì •ë³´
    original_name VARCHAR(255) NOT NULL,
    file_path VARCHAR(500) NOT NULL,
    file_size BIGINT NOT NULL,
    mime_type VARCHAR(100) NOT NULL,
    
    -- ì—…ë¡œë“œ ì»¨í…ìŠ¤íŠ¸
    upload_type VARCHAR(50) NOT NULL,  -- project_import, data_export, user_avatar, document
    status VARCHAR(20) DEFAULT 'uploading',  -- uploading, completed, failed
    
    -- ì²˜ë¦¬ ê²°ê³¼
    processing_results JSONB DEFAULT '{}',
    error_message TEXT,
    
    -- ë©”íƒ€ë°ì´í„°
    metadata JSONB DEFAULT '{}',
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    completed_at TIMESTAMP WITH TIME ZONE
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_file_uploads_user ON file_uploads(uploaded_by_id);
CREATE INDEX idx_file_uploads_type ON file_uploads(upload_type);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- íŒŒì¼ ì—…ë¡œë“œ ì¶”ì  ë° ê´€ë¦¬
- processing_results: íŒŒì¼ ì²˜ë¦¬ ê²°ê³¼ (ì˜ˆ: ì„í¬íŠ¸ í†µê³„)

---

#### 6.4 notifications (ì•Œë¦¼)
```sql
CREATE TABLE notifications (
    id SERIAL PRIMARY KEY,
    recipient_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- ì•Œë¦¼ ë‚´ìš©
    title VARCHAR(200) NOT NULL,
    message TEXT NOT NULL,
    type VARCHAR(10) DEFAULT 'info',  -- info, success, warning, error
    
    -- ìƒíƒœ
    is_read BOOLEAN DEFAULT FALSE,
    is_important BOOLEAN DEFAULT FALSE,
    
    -- ì„ íƒì  ì•¡ì…˜
    action_url VARCHAR(200),
    action_label VARCHAR(50),
    
    -- ê´€ë ¨ ê°ì²´ (Generic Foreign Key)
    content_type_id INTEGER REFERENCES django_content_type(id) ON DELETE CASCADE,
    object_id VARCHAR(255),
    
    -- íƒ€ì´ë°
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    expires_at TIMESTAMP WITH TIME ZONE,
    read_at TIMESTAMP WITH TIME ZONE
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_notifications_recipient_is_read ON notifications(recipient_id, is_read);
CREATE INDEX idx_notifications_created_at ON notifications(created_at);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (recipient) (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ì‚¬ìš©ìë³„ ì•Œë¦¼ ê´€ë¦¬
- action_url: ì•Œë¦¼ í´ë¦­ ì‹œ ì´ë™í•  URL
- ìë™ ë§Œë£Œ (expires_at)

---

#### 6.5 api_keys (API í‚¤)
```sql
CREATE TABLE api_keys (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- í‚¤ ì •ë³´
    name VARCHAR(100) NOT NULL,
    key VARCHAR(64) UNIQUE NOT NULL,
    
    -- ê¶Œí•œ
    permissions JSONB DEFAULT '[]',
    rate_limit INTEGER DEFAULT 1000,  -- requests per hour
    
    -- ìƒíƒœ
    is_active BOOLEAN DEFAULT TRUE,
    last_used_at TIMESTAMP WITH TIME ZONE,
    usage_count INTEGER DEFAULT 0,
    
    -- íƒ€ì´ë°
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    expires_at TIMESTAMP WITH TIME ZONE
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_api_keys_user ON api_keys(user_id);
CREATE INDEX idx_api_keys_key ON api_keys(key);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ì™¸ë¶€ í†µí•©ì„ ìœ„í•œ API í‚¤ ê´€ë¦¬
- rate_limit: ì‹œê°„ë‹¹ ìš”ì²­ ì œí•œ
- usage_count: ì‚¬ìš© í†µê³„ ì¶”ì 

---

### 7. exports ì•± (ë¦¬í¬íŒ… ì‹œìŠ¤í…œ)

#### 7.1 export_templates (ë‚´ë³´ë‚´ê¸° í…œí”Œë¦¿)
```sql
CREATE TABLE export_templates (
    id SERIAL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    description TEXT NOT NULL,
    format VARCHAR(10) NOT NULL,  -- excel, pdf, word, csv, json
    template_type VARCHAR(30) NOT NULL,  -- executive_summary, detailed_analysis, etc.
    
    -- í…œí”Œë¦¿ ì„¤ì •
    include_sections JSONB DEFAULT '{}',
    styling_options JSONB DEFAULT '{}',
    
    -- ë¸Œëœë”©
    logo_url VARCHAR(200),
    header_text VARCHAR(200),
    footer_text VARCHAR(200),
    
    -- ì„¤ì •
    is_default BOOLEAN DEFAULT FALSE,
    is_public BOOLEAN DEFAULT FALSE,
    
    created_by_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**ì£¼ìš” ê´€ê³„**:
- â† users (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ë‹¤ì–‘í•œ í˜•ì‹ì˜ ë³´ê³ ì„œ í…œí”Œë¦¿
- include_sections: í¬í•¨í•  ì„¹ì…˜ ì„¤ì •
- ì¡°ì§ë³„ ë¸Œëœë”© ì§€ì›

---

#### 7.2 export_history (ë‚´ë³´ë‚´ê¸° ì´ë ¥)
```sql
CREATE TABLE export_history (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID NOT NULL REFERENCES simple_projects(id) ON DELETE CASCADE,
    template_id INTEGER REFERENCES export_templates(id) ON DELETE SET NULL,
    exported_by_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- íŒŒì¼ ì •ë³´
    file_name VARCHAR(255) NOT NULL,
    file_path VARCHAR(500),
    file_size INTEGER,
    format VARCHAR(10) NOT NULL,
    
    -- ìƒíƒœ
    status VARCHAR(20) DEFAULT 'pending',  -- pending, processing, completed, failed
    error_message TEXT,
    
    -- íƒ€ì´ë°
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    completed_at TIMESTAMP WITH TIME ZONE,
    expires_at TIMESTAMP WITH TIME ZONE,
    
    -- ë‹¤ìš´ë¡œë“œ ì¶”ì 
    download_count INTEGER DEFAULT 0,
    last_downloaded_at TIMESTAMP WITH TIME ZONE
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_export_history_project ON export_history(project_id);
CREATE INDEX idx_export_history_user ON export_history(exported_by_id);
CREATE INDEX idx_export_history_created_at ON export_history(created_at);
```

**ì£¼ìš” ê´€ê³„**:
- â† simple_projects (N:1)
- â† export_templates (N:1, optional)
- â† users (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ë‚´ë³´ë‚´ê¸° ì‘ì—… ì´ë ¥ ê´€ë¦¬
- ë‹¤ìš´ë¡œë“œ íšŸìˆ˜ ì¶”ì 
- ì„ì‹œ íŒŒì¼ ìë™ ì‚­ì œ (expires_at)

---

#### 7.3 report_schedules (ë³´ê³ ì„œ ìŠ¤ì¼€ì¤„)
```sql
CREATE TABLE report_schedules (
    id SERIAL PRIMARY KEY,
    project_id UUID NOT NULL REFERENCES simple_projects(id) ON DELETE CASCADE,
    template_id INTEGER NOT NULL REFERENCES export_templates(id) ON DELETE CASCADE,
    created_by_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    -- ìŠ¤ì¼€ì¤„ ì„¤ì •
    frequency VARCHAR(10) NOT NULL,  -- once, daily, weekly, monthly
    next_run TIMESTAMP WITH TIME ZONE NOT NULL,
    last_run TIMESTAMP WITH TIME ZONE,
    
    -- ìˆ˜ì‹ ì
    recipients JSONB DEFAULT '[]',  -- Array of email addresses
    
    -- ìƒíƒœ
    is_active BOOLEAN DEFAULT TRUE,
    
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_report_schedules_project ON report_schedules(project_id);
CREATE INDEX idx_report_schedules_next_run ON report_schedules(next_run);
```

**ì£¼ìš” ê´€ê³„**:
- â† simple_projects (N:1)
- â† export_templates (N:1)
- â† users (N:1)

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
- ìë™ ë³´ê³ ì„œ ìƒì„± ìŠ¤ì¼€ì¤„ë§
- recipients: JSON ë°°ì—´ë¡œ ì´ë©”ì¼ ëª©ë¡ ì €ì¥
- Celery/í¬ë¡ ì¡ìœ¼ë¡œ ì‹¤í–‰

---

## í…Œì´ë¸” ê´€ê³„ë„

### í•µì‹¬ ê´€ê³„ ìš”ì•½

```
USER (1) â”€â”€ownsâ”€â”€> (N) PROJECT
USER (N) â”€â”€evaluatesâ”€â”€> (N) PROJECT [via EVALUATION]
USER (N) â”€â”€member_ofâ”€â”€> (N) PROJECT [via PROJECT_MEMBER]

PROJECT (1) â”€â”€hasâ”€â”€> (N) CRITERIA
PROJECT (1) â”€â”€hasâ”€â”€> (N) EVALUATION
PROJECT (1) â”€â”€hasâ”€â”€> (N) WORKSHOP_SESSION

CRITERIA (1) â”€â”€parent_ofâ”€â”€> (N) CRITERIA [self-referencing hierarchy]

EVALUATION (1) â”€â”€containsâ”€â”€> (N) PAIRWISE_COMPARISON
PAIRWISE_COMPARISON (N) â”€â”€comparesâ”€â”€> (2) CRITERIA

WORKSHOP_SESSION (1) â”€â”€includesâ”€â”€> (N) WORKSHOP_PARTICIPANT
WORKSHOP_SESSION (1) â”€â”€producesâ”€â”€> (1) GROUP_CONSENSUS_RESULT

PROJECT (1) â”€â”€analyzed_inâ”€â”€> (N) ANALYSIS_RESULT
PROJECT (1) â”€â”€exported_asâ”€â”€> (N) EXPORT_HISTORY
```

### ì™¸ë˜ í‚¤ ì œì•½ì¡°ê±´ ì •ì±…

- **ON DELETE CASCADE**: ë¶€ëª¨ ì‚­ì œ ì‹œ ìì‹ë„ ì‚­ì œ
  - ì˜ˆ: Project ì‚­ì œ â†’ ëª¨ë“  Evaluation ì‚­ì œ
- **ON DELETE SET NULL**: ë¶€ëª¨ ì‚­ì œ ì‹œ FK NULLë¡œ ë³€ê²½
  - ì˜ˆ: User ì‚­ì œ â†’ ActivityLog.user_id = NULL
- **ON DELETE PROTECT** (ì•± ë ˆë²¨): ìì‹ ì¡´ì¬ ì‹œ ì‚­ì œ ì°¨ë‹¨
  - Django ëª¨ë¸ì—ì„œ í•„ìš” ì‹œ êµ¬í˜„

---

## DB ì´ˆê¸°í™” ë°©ë²•

### Render.com ì™„ì „ ì´ˆê¸°í™”

#### 1ë‹¨ê³„: í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```bash
# Render.com Dashboard â†’ Environment íƒ­
FLUSH_DB=true
DJANGO_SUPERUSER_USERNAME=admin
DJANGO_SUPERUSER_PASSWORD=your_password
DJANGO_SUPERUSER_EMAIL=admin@example.com
```

#### 2ë‹¨ê³„: ì¬ë°°í¬
- Manual Deploy â†’ Clear build cache & deploy

#### 3ë‹¨ê³„: ì •ìƒí™”
- ì„±ê³µ í›„ **FLUSH_DB í™˜ê²½ë³€ìˆ˜ ì‚­ì œ**

### ë¡œì»¬ ê°œë°œ ì´ˆê¸°í™”

```bash
cd D:\ahp\ahp_django_service_updated

# 1. ê¸°ì¡´ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ì‚­ì œ (ì„ íƒì )
find apps -path "*/migrations/*.py" -not -name "__init__.py" -delete

# 2. DB í”ŒëŸ¬ì‹œ
python manage.py flush --noinput

# 3. ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„± ë° ì ìš©
python manage.py makemigrations
python manage.py migrate

# 4. ìŠˆí¼ìœ ì € ìƒì„±
python manage.py createsuperuser
```

---

## ì„±ëŠ¥ ìµœì í™” ê¶Œì¥ì‚¬í•­

### ì¸ë±ìŠ¤ ì „ëµ
- ì™¸ë˜ í‚¤ ëª¨ë‘ ì¸ë±ì‹± ì™„ë£Œ
- ìì£¼ í•„í„°ë§/ì •ë ¬í•˜ëŠ” ì»¬ëŸ¼ ì¸ë±ì‹±
- ë³µí•© ì¸ë±ìŠ¤: (user_id, timestamp) ë“±

### ì¿¼ë¦¬ ìµœì í™”
- `select_related()`: 1:1, N:1 ê´€ê³„
- `prefetch_related()`: 1:N, M:N ê´€ê³„
- ë¶ˆí•„ìš”í•œ í•„ë“œ ì œì™¸: `only()`, `defer()`

### ë°ì´í„° íŒŒí‹°ì…”ë‹ (ëŒ€ìš©ëŸ‰ ì‹œ)
- activity_logs, evaluation_sessions ë“± ì‹œê°„ ê¸°ë°˜ íŒŒí‹°ì…”ë‹ ê³ ë ¤

---

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### ë¯¼ê° ë°ì´í„°
- ë¹„ë°€ë²ˆí˜¸: Django PBKDF2 í•´ì‹±
- API í‚¤: ì•”í˜¸í™” ì €ì¥ ê¶Œì¥
- ê°œì¸ì •ë³´: GDPR ì¤€ìˆ˜

### ì ‘ê·¼ ì œì–´
- í–‰ ë ˆë²¨ ë³´ì•ˆ: Django ORM í•„í„°
- API ê¶Œí•œ: DRF permissions
- rate_limit: API í‚¤ë³„ ì œí•œ

---

*ì‘ì„±ì¼: 2025-09-27*
*ë°±ì—”ë“œ: Django 4.2.7 + PostgreSQL*
*ë°°í¬: Render.com*