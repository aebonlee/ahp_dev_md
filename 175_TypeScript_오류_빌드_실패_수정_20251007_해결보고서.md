# 27. TypeScript ì˜¤ë¥˜ ë° ë¹Œë“œ ì‹¤íŒ¨ ìˆ˜ì •

> **ì‘ì—…ì¼**: 2025-08-31  
> **ì´ìŠˆ**: GitHub Actions ë¹Œë“œ ì‹¤íŒ¨ - TypeScript íƒ€ì… ì˜¤ë¥˜ë“¤

## ğŸš¨ ë¹Œë“œ ì˜¤ë¥˜ í˜„í™©

GitHub Actionsì—ì„œ ë‹¤ìŒ ì˜¤ë¥˜ë“¤ ë°œìƒ:
- `Cannot find name 'dataService'` in App.tsx
- `Property 'getTrashedProjects' does not exist` on api.project
- `Type 'string' is not assignable to type 'draft' | 'active' | 'completed'`
- ë‹¤ìˆ˜ì˜ `Cannot find name 'api'` ì˜¤ë¥˜ë“¤

## ğŸ” ì˜¤ë¥˜ ë¶„ì„ ë° í•´ê²°

### 1. **App.tsxì— dataService import ëˆ„ë½**

#### ë¬¸ì œ
```typescript
// App.tsxì—ì„œ dataService ì‚¬ìš©í•˜ì§€ë§Œ import ì—†ìŒ
const trashedProjects = await dataService.getTrashedProjects();  // âŒ ì˜¤ë¥˜
```

#### í•´ê²°
```typescript
// App.tsx ìƒë‹¨ì— import ì¶”ê°€
import sessionService from './services/sessionService';
import dataService from './services/dataService';  // âœ… ì¶”ê°€
```

### 2. **ProjectData íƒ€ì…ì— deleted ìƒíƒœ ëˆ„ë½**

#### ë¬¸ì œ
```typescript
// api.tsì—ì„œ status íƒ€ì…ì´ 'deleted' í¬í•¨í•˜ì§€ ì•ŠìŒ
status: 'draft' | 'active' | 'completed';  // âŒ 'deleted' ì—†ìŒ

// dataService.tsì—ì„œ 'deleted' ì‚¬ìš© ì‹œ íƒ€ì… ì˜¤ë¥˜
status: 'deleted'  // âŒ íƒ€ì… ë¶ˆì¼ì¹˜
```

#### í•´ê²°
```typescript
// api.ts - ProjectData ì¸í„°í˜ì´ìŠ¤ í™•ì¥
export interface ProjectData {
  id?: string;
  title: string;
  description: string;
  objective?: string;
  status: 'draft' | 'active' | 'completed' | 'deleted';  // âœ… 'deleted' ì¶”ê°€
  evaluation_mode: 'practical' | 'theoretical' | 'direct_input';
  workflow_stage: 'creating' | 'waiting' | 'evaluating' | 'completed';
  created_at?: string;
  updated_at?: string;
  deleted_at?: string;  // âœ… ì‚­ì œ íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€
  criteria_count?: number;
  alternatives_count?: number;
}
```

### 3. **API íœ´ì§€í†µ ë©”ì„œë“œ ëˆ„ë½**

#### ë¬¸ì œ
```typescript
// dataServiceì—ì„œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œ í˜¸ì¶œ
await api.project.getTrashedProjects();     // âŒ ë©”ì„œë“œ ì—†ìŒ
await api.project.restoreProject(id);       // âŒ ë©”ì„œë“œ ì—†ìŒ  
await api.project.permanentDeleteProject(id); // âŒ ë©”ì„œë“œ ì—†ìŒ
```

#### í•´ê²°
```typescript
// api.ts - projectApiì— íœ´ì§€í†µ ë©”ì„œë“œ ì¶”ê°€
export const projectApi = {
  // ê¸°ì¡´ ë©”ì„œë“œë“¤...
  
  // íœ´ì§€í†µ í”„ë¡œì íŠ¸ ì¡°íšŒ
  getTrashedProjects: () =>
    makeRequest<ProjectData[]>('/api/projects/trash'),

  // í”„ë¡œì íŠ¸ ë³µì›
  restoreProject: (id: string) =>
    makeRequest<void>(`/api/projects/${id}/restore`, {
      method: 'PUT'
    }),

  // í”„ë¡œì íŠ¸ ì˜êµ¬ ì‚­ì œ
  permanentDeleteProject: (id: string) =>
    makeRequest<void>(`/api/projects/${id}/permanent`, {
      method: 'DELETE'
    })
};
```

### 4. **dataService API í˜¸ì¶œ ëª¨ë“ˆ ë¶ˆì¼ì¹˜**

#### ë¬¸ì œ
```typescript
// êµ¬ì‹ api ëª¨ë“ˆ ì‚¬ìš©
import api from './api';
// ...
await api.project.getProjects();      // âŒ êµ¬ì‹ ë°©ì‹
await api.criteria.getCriteria();     // âŒ êµ¬ì‹ ë°©ì‹
```

#### í•´ê²°
```typescript
// ìƒˆë¡œìš´ ë¶„ë¦¬ëœ API ëª¨ë“ˆ ì‚¬ìš©
import { projectApi, criteriaApi, alternativeApi, evaluatorApi, evaluationApi } from './api';
// ...
await projectApi.getProjects();       // âœ… ìƒˆë¡œìš´ ë°©ì‹
await criteriaApi.getCriteria();      // âœ… ìƒˆë¡œìš´ ë°©ì‹
```

**ì´ 13ê°œ API í˜¸ì¶œ ìˆ˜ì •**:
- projectApi: 4ê°œ (getProjects, getProject, createProject, updateProject, deleteProject)
- criteriaApi: 4ê°œ (getCriteria, createCriteria, updateCriteria, deleteCriteria)  
- alternativeApi: 4ê°œ (getAlternatives, createAlternative, updateAlternative, deleteAlternative)
- evaluatorApi: 3ê°œ (getEvaluators, addEvaluator, removeEvaluator)
- evaluationApi: 2ê°œ (savePairwiseComparison, getPairwiseComparisons)

### 5. **UserProject íƒ€ì… ì¼ê´€ì„±**

#### ë¬¸ì œ  
```typescript
// ProjectSelector.tsxì—ì„œ 'deleted' ìƒíƒœ ë¯¸ì§€ì›
status: 'draft' | 'active' | 'completed';  // âŒ 'deleted' ëˆ„ë½
```

#### í•´ê²°
```typescript
// ProjectSelector.tsx - UserProject ì¸í„°í˜ì´ìŠ¤ í™•ì¥
interface UserProject {
  // ë‹¤ë¥¸ í•„ë“œë“¤...
  status: 'draft' | 'active' | 'completed' | 'deleted';  // âœ… 'deleted' ì¶”ê°€
}
```

### 6. **íƒ€ì… ì•ˆì „ì„± ê°•í™”**

#### as const ì‚¬ìš©ìœ¼ë¡œ íƒ€ì… ê°•í™”
```typescript
// Before
status: 'deleted'         // Type: string
status: 'active'          // Type: string

// After  
status: 'deleted' as const  // Type: 'deleted'
status: 'active' as const   // Type: 'active'
```

## ğŸ“Š ìˆ˜ì •ëœ íŒŒì¼ ìš”ì•½

### 1. **App.tsx** (+1ë¼ì¸)
- dataService import ì¶”ê°€

### 2. **api.ts** (+18ë¼ì¸)
- ProjectDataì— 'deleted' ìƒíƒœ ë° deleted_at í•„ë“œ ì¶”ê°€
- projectApiì— íœ´ì§€í†µ ë©”ì„œë“œ 3ê°œ ì¶”ê°€

### 3. **dataService.ts** (+2ë¼ì¸, 13ê°œ ë³€ê²½)
- import êµ¬ë¬¸ì„ ë¶„ë¦¬ëœ API ëª¨ë“ˆë¡œ ë³€ê²½
- ëª¨ë“  api í˜¸ì¶œì„ ìƒˆë¡œìš´ ëª¨ë“ˆ ë°©ì‹ìœ¼ë¡œ ìˆ˜ì •
- íƒ€ì… ì•ˆì „ì„±ì„ ìœ„í•œ as const ì¶”ê°€

### 4. **ProjectSelector.tsx** (+1ë¼ì¸)  
- UserProject ì¸í„°í˜ì´ìŠ¤ì— 'deleted' ìƒíƒœ ì¶”ê°€

## ğŸ§ª ë¹Œë“œ ê²€ì¦

### TypeScript ì»´íŒŒì¼
```bash
npx tsc --noEmit
# âœ… ì˜¤ë¥˜ ì—†ìŒ
```

### í”„ë¡œì íŠ¸ ë¹Œë“œ
```bash
npm run build  
# âœ… ì„±ê³µ
```

### GitHub Actions ì¤€ë¹„
- âœ… ëª¨ë“  íƒ€ì… ì˜¤ë¥˜ í•´ê²°
- âœ… API ëª¨ë“ˆ ì¼ê´€ì„± í™•ë³´
- âœ… íœ´ì§€í†µ ì‹œìŠ¤í…œ íƒ€ì… ì™„ì„±

## ğŸ¯ ê¸°ìˆ ì  ê°œì„  íš¨ê³¼

### íƒ€ì… ì•ˆì „ì„±
- âœ… **ì™„ì „í•œ íƒ€ì… ì»¤ë²„ë¦¬ì§€**: ëª¨ë“  íœ´ì§€í†µ ê´€ë ¨ ê¸°ëŠ¥ íƒ€ì… ì§€ì›
- âœ… **ì»´íŒŒì¼ íƒ€ì„ ê²€ì¦**: ëŸ°íƒ€ì„ ì˜¤ë¥˜ ì‚¬ì „ ë°©ì§€
- âœ… **ì¼ê´€ëœ ìƒíƒœ ê´€ë¦¬**: 'deleted' ìƒíƒœ ì „ì—­ ì§€ì›

### API ì•„í‚¤í…ì²˜
- âœ… **ëª¨ë“ˆí™”ëœ API**: ê¸°ëŠ¥ë³„ API ë¶„ë¦¬ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- âœ… **ë¯¸ë˜ í™•ì¥ì„±**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ íƒ€ì… ì•ˆì „ì„± ë³´ì¥
- âœ… **ì˜¤ë¥˜ ì²˜ë¦¬**: ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ ëª¨ë“  ì‹œë‚˜ë¦¬ì˜¤ ëŒ€ì‘

### ê°œë°œ ê²½í—˜
- âœ… **IDE ì§€ì›**: ìë™ì™„ì„± ë° íƒ€ì… íŒíŠ¸ ì™„ë²½ ì§€ì›
- âœ… **ë””ë²„ê¹…**: ì»´íŒŒì¼ íƒ€ì„ì— íƒ€ì… ì˜¤ë¥˜ ë°œê²¬
- âœ… **ë¦¬íŒ©í† ë§**: ì•ˆì „í•œ ì½”ë“œ ë³€ê²½ ì§€ì›

## ğŸ‰ ê²°ë¡ 

ëª¨ë“  TypeScript ì˜¤ë¥˜ê°€ í•´ê²°ë˜ì–´ GitHub Actions ë¹Œë“œê°€ ì„±ê³µí•  ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. íœ´ì§€í†µ ì‹œìŠ¤í…œì˜ íƒ€ì… ì•ˆì „ì„±ì´ ì™„ë²½í•˜ê²Œ í™•ë³´ë˜ì—ˆìœ¼ë©°, API ëª¨ë“ˆì˜ ì¼ê´€ì„±ë„ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.